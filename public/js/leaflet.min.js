!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.omnivore=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b){"addData"in a&&a.addData(b),"setGeoJSON"in a&&a.setGeoJSON(b)}function e(a,b,c){var e=c||L.geoJson();return s(a,function(a,b){return a?e.fire("error",{error:a}):(d(e,JSON.parse(b.responseText)),void e.fire("ready"))}),e}function f(a,b,c){function d(a,c){return a?e.fire("error",{error:a}):(l(c.responseText,b,e),void e.fire("ready"))}var e=c||L.geoJson();return s(a,d),e}function g(a,b,c){function d(a,c){function d(){f=!0}var f;return a?e.fire("error",{error:a}):(e.on("error",d),m(c.responseText,b,e),e.off("error",d),void(f||e.fire("ready")))}var e=c||L.geoJson();return s(a,d),e}function h(a,b,c){function d(a,c){function d(){f=!0}var f;return a?e.fire("error",{error:a}):(e.on("error",d),n(c.responseXML||c.responseText,b,e),e.off("error",d),void(f||e.fire("ready")))}var e=c||L.geoJson();return s(a,d),e}function i(a,b,c){function d(a,c){function d(){f=!0}var f;return a?e.fire("error",{error:a}):(e.on("error",d),o(c.responseXML||c.responseText,b,e),e.off("error",d),void(f||e.fire("ready")))}var e=c||L.geoJson();return s(a,d),e}function j(a,b,c){function d(a,c){return a?e.fire("error",{error:a}):(q(c.responseText,b,e),void e.fire("ready"))}var e=c||L.geoJson();return s(a,d),e}function k(a,b,c){function d(a,c){return a?e.fire("error",{error:a}):(p(c.responseText,b,e),void e.fire("ready"))}var e=c||L.geoJson();return s(a,d),e}function l(a,b,c){var e="string"==typeof a?JSON.parse(a):a;c=c||L.geoJson();for(var f in e.objects){var g=w.feature(e,e.objects[f]);g.features?d(c,g.features):d(c,g)}return c}function m(a,b,c){function e(a,b){return a?c.fire("error",{error:a}):void d(c,b)}return c=c||L.geoJson(),b=b||{},t.csv2geojson(a,b,e),c}function n(a,b,c){var e=r(a);if(!e)return c.fire("error",{error:"Could not parse GPX"});c=c||L.geoJson();var f=x.gpx(e);return d(c,f),c}function o(a,b,c){var e=r(a);if(!e)return c.fire("error",{error:"Could not parse KML"});c=c||L.geoJson();var f=x.kml(e);return d(c,f),c}function p(a,b,c){c=c||L.geoJson(),b=b||{};for(var e=v.decode(a,b.precision),f={type:"LineString",coordinates:[]},g=0;g<e.length;g++)f.coordinates[g]=[e[g][1],e[g][0]];return d(c,f),c}function q(a,b,c){c=c||L.geoJson();var e=u(a);return d(c,e),c}function r(a){return"string"==typeof a?(new DOMParser).parseFromString(a,"text/xml"):a}var s=a("corslite"),t=a("csv2geojson"),u=a("wellknown"),v=a("polyline"),w=a("topojson/topojson.js"),x=a("togeojson");b.exports.polyline=k,b.exports.polyline.parse=p,b.exports.geojson=e,b.exports.topojson=f,b.exports.topojson.parse=l,b.exports.csv=g,b.exports.csv.parse=m,b.exports.gpx=h,b.exports.gpx.parse=n,b.exports.kml=i,b.exports.kml.parse=o,b.exports.wkt=j,b.exports.wkt.parse=q},{corslite:5,csv2geojson:6,polyline:9,togeojson:10,"topojson/topojson.js":11,wellknown:12}],2:[function(a,b,c){},{}],3:[function(a,b,c){b.exports=a(2)},{"/Users/tmcw/src/leaflet-omnivore/node_modules/browserify/lib/_empty.js":2}],4:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],5:[function(a,b,c){function d(a,b,c){function d(a){return a>=200&&300>a||304===a}function e(){void 0===h.status||d(h.status)?b.call(h,null,h):b.call(h,h,null)}var f=!1;if("undefined"==typeof window.XMLHttpRequest)return b(Error("Browser not supported"));if("undefined"==typeof c){var g=a.match(/^\s*https?:\/\/[^\/]*/);c=g&&g[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var h=new window.XMLHttpRequest;if(c&&!("withCredentials"in h)){h=new window.XDomainRequest;var i=b;b=function(){if(f)i.apply(this,arguments);else{var a=this,b=arguments;setTimeout(function(){i.apply(a,b)},0)}}}return"onload"in h?h.onload=e:h.onreadystatechange=function(){4===h.readyState&&e()},h.onerror=function(a){b.call(this,a||!0,null),b=function(){}},h.onprogress=function(){},h.ontimeout=function(a){b.call(this,a,null),b=function(){}},h.onabort=function(a){b.call(this,a,null),b=function(){}},h.open("GET",a,!0),h.send(null),f=!0,h}"undefined"!=typeof b&&(b.exports=d)},{}],6:[function(a,b,c){function d(a){return!!a.match(/(Lat)(itude)?/gi)}function e(a){return!!a.match(/(L)(on|ng)(gitude)?/i)}function f(a){return"object"==typeof a?Object.keys(a).length:0}function g(a){var b=[",",";","	","|"],c=[];return b.forEach(function(b){var d=l(b).parse(a);if(d.length>=1){for(var e=f(d[0]),g=0;g<d.length;g++)if(f(d[g])!==e)return;c.push({delimiter:b,arity:Object.keys(d[0]).length})}}),c.length?c.sort(function(a,b){return b.arity-a.arity})[0].delimiter:null}function h(a){var b=g(a);return b?l(b).parse(a):null}function i(a,b,c){c||(c=b,b={}),b.delimiter=b.delimiter||",";var f=b.latfield||"",h=b.lonfield||"",i=[],j={type:"FeatureCollection",features:i};if("auto"===b.delimiter&&"string"==typeof a&&(b.delimiter=g(a),!b.delimiter))return c({type:"Error",message:"Could not autodetect delimiter"});var k="string"==typeof a?l(b.delimiter).parse(a):a;if(!k.length)return c(null,j);if(!f||!h){for(var n in k[0])!f&&d(n)&&(f=n),!h&&e(n)&&(h=n);if(!f||!h){var o=[];for(var p in k[0])o.push(p);return c({type:"Error",message:"Latitude and longitude fields not present",data:k,fields:o})}}for(var q=[],r=0;r<k.length;r++)if(void 0!==k[r][h]&&void 0!==k[r][h]){var s,t,u,v=k[r][h],w=k[r][f];u=m(v,"EW"),u&&(v=u),u=m(w,"NS"),u&&(w=u),s=parseFloat(v),t=parseFloat(w),isNaN(s)||isNaN(t)?q.push({message:"A row contained an invalid value for latitude or longitude",row:k[r]}):(b.includeLatLon||(delete k[r][h],delete k[r][f]),i.push({type:"Feature",properties:k[r],geometry:{type:"Point",coordinates:[parseFloat(s),parseFloat(t)]}}))}c(q.length?q:null,j)}function j(a){for(var b=a.features,c={type:"Feature",geometry:{type:"LineString",coordinates:[]}},d=0;d<b.length;d++)c.geometry.coordinates.push(b[d].geometry.coordinates);return c.properties=b[0].properties,{type:"FeatureCollection",features:[c]}}function k(a){for(var b=a.features,c={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},d=0;d<b.length;d++)c.geometry.coordinates[0].push(b[d].geometry.coordinates);return c.properties=b[0].properties,{type:"FeatureCollection",features:[c]}}var l=a("dsv"),m=a("sexagesimal");b.exports={isLon:e,isLat:d,csv:l.csv.parse,tsv:l.tsv.parse,dsv:l,auto:h,csv2geojson:i,toLine:j,toPolygon:k}},{dsv:7,sexagesimal:8}],7:[function(a,b,c){a("fs");b.exports=new Function('dsv.version = "0.0.3";\n\ndsv.tsv = dsv("\\t");\ndsv.csv = dsv(",");\n\nfunction dsv(delimiter) {\n  var dsv = {},\n      reFormat = new RegExp("[\\"" + delimiter + "\\n]"),\n      delimiterCode = delimiter.charCodeAt(0);\n\n  dsv.parse = function(text, f) {\n    var o;\n    return dsv.parseRows(text, function(row, i) {\n      if (o) return o(row, i - 1);\n      var a = new Function("d", "return {" + row.map(function(name, i) {\n        return JSON.stringify(name) + ": d[" + i + "]";\n      }).join(",") + "}");\n      o = f ? function(row, i) { return f(a(row), i); } : a;\n    });\n  };\n\n  dsv.parseRows = function(text, f) {\n    var EOL = {}, // sentinel value for end-of-line\n        EOF = {}, // sentinel value for end-of-file\n        rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // the current line number\n        t, // the current token\n        eol; // is the current token followed by EOL?\n\n    function token() {\n      if (I >= N) return EOF; // special case: end of file\n      if (eol) return eol = false, EOL; // special case: end of line\n\n      // special case: quotes\n      var j = I;\n      if (text.charCodeAt(j) === 34) {\n        var i = j;\n        while (i++ < N) {\n          if (text.charCodeAt(i) === 34) {\n            if (text.charCodeAt(i + 1) !== 34) break;\n            ++i;\n          }\n        }\n        I = i + 2;\n        var c = text.charCodeAt(i + 1);\n        if (c === 13) {\n          eol = true;\n          if (text.charCodeAt(i + 2) === 10) ++I;\n        } else if (c === 10) {\n          eol = true;\n        }\n        return text.substring(j + 1, i).replace(/""/g, "\\"");\n      }\n\n      // common case: find next delimiter or newline\n      while (I < N) {\n        var c = text.charCodeAt(I++), k = 1;\n        if (c === 10) eol = true; // \\n\n        else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n        else if (c !== delimiterCode) continue;\n        return text.substring(j, I - k);\n      }\n\n      // special case: last token before EOF\n      return text.substring(j);\n    }\n\n    while ((t = token()) !== EOF) {\n      var a = [];\n      while (t !== EOL && t !== EOF) {\n        a.push(t);\n        t = token();\n      }\n      if (f && !(a = f(a, n++))) continue;\n      rows.push(a);\n    }\n\n    return rows;\n  };\n\n  dsv.format = function(rows) {\n    if (Array.isArray(rows[0])) return dsv.formatRows(rows); // deprecated; use formatRows\n    var fieldSet = {}, fields = [];\n\n    // Compute unique fields in order of discovery.\n    rows.forEach(function(row) {\n      for (var field in row) {\n        if (!(field in fieldSet)) {\n          fields.push(fieldSet[field] = field);\n        }\n      }\n    });\n\n    return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n      return fields.map(function(field) {\n        return formatValue(row[field]);\n      }).join(delimiter);\n    })).join("\\n");\n  };\n\n  dsv.formatRows = function(rows) {\n    return rows.map(formatRow).join("\\n");\n  };\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return reFormat.test(text) ? "\\"" + text.replace(/\\"/g, "\\"\\"") + "\\"" : text;\n  }\n\n  return dsv;\n}\n;return dsv')()},{fs:2}],8:[function(a,b,c){b.exports=function(a,b){if(b||(b="NSEW"),"string"!=typeof a)return null;var c=/^([0-9.]+)°? *(?:([0-9.]+)['’′‘] *)?(?:([0-9.]+)(?:''|"|”|″) *)?([NSEW])?/,d=a.match(c);return d?d[4]&&-1===b.indexOf(d[4])?null:((d[1]?parseFloat(d[1]):0)+(d[2]?parseFloat(d[2])/60:0)+(d[3]?parseFloat(d[3])/3600:0))*(d[4]&&"S"===d[4]||"W"===d[4]?-1:1):null}},{}],9:[function(a,b,c){function d(a,b){a=Math.round(a*b),a<<=1,0>a&&(a=~a);for(var c="";a>=32;)c+=String.fromCharCode((32|31&a)+63),a>>=5;return c+=String.fromCharCode(a+63)}var e={};e.decode=function(a,b){for(var c,d,e=0,f=0,g=0,h=[],i=0,j=0,k=null,l=Math.pow(10,b||5);e<a.length;){k=null,i=0,j=0;do k=a.charCodeAt(e++)-63,j|=(31&k)<<i,i+=5;while(k>=32);c=1&j?~(j>>1):j>>1,i=j=0;do k=a.charCodeAt(e++)-63,j|=(31&k)<<i,i+=5;while(k>=32);d=1&j?~(j>>1):j>>1,f+=c,g+=d,h.push([f/l,g/l])}return h},e.encode=function(a,b){if(!a.length)return"";for(var c=Math.pow(10,b||5),e=d(a[0][0],c)+d(a[0][1],c),f=1;f<a.length;f++){var g=a[f],h=a[f-1];e+=d(g[0]-h[0],c),e+=d(g[1]-h[1],c)}return e},void 0!==typeof b&&(b.exports=e)},{}],10:[function(a,b,c){(function(d){toGeoJSON=function(){"use strict";function b(a){if(!a||!a.length)return 0;for(var b=0,c=0;b<a.length;b++)c=(c<<5)-c+a.charCodeAt(b)|0;return c}function e(a,b){return a.getElementsByTagName(b)}function f(a,b){return a.getAttribute(b)}function g(a,b){return parseFloat(f(a,b))}function h(a,b){var c=e(a,b);return c.length?c[0]:null}function i(a){return a.normalize&&a.normalize(),a}function j(a){for(var b=0,c=[];b<a.length;b++)c[b]=parseFloat(a[b]);return c}function k(a){var b={};for(var c in a)a[c]&&(b[c]=a[c]);return b}function l(a){return a&&i(a),a&&a.firstChild&&a.firstChild.nodeValue||""}function m(a){return j(a.replace(s,"").split(","))}function n(a){for(var b=a.replace(t,"").split(u),c=[],d=0;d<b.length;d++)c.push(m(b[d]));return c}function o(a){var b=[g(a,"lon"),g(a,"lat")],c=h(a,"ele"),d=h(a,"time");return c&&b.push(parseFloat(l(c))),{coordinates:b,time:d?l(d):null}}function p(){return{type:"FeatureCollection",features:[]}}function q(a){return void 0!==a.xml?a.xml:r.serializeToString(a)}var r,s=/\s*/g,t=/^\s*|\s*$/g,u=/\s+/;"undefined"!=typeof XMLSerializer?r=new XMLSerializer:"object"!=typeof c||"object"!=typeof d||d.browser||(r=new(a("xmldom").XMLSerializer));var v={kml:function(a){function c(a){var b,c;return a=a||"","#"===a.substr(0,1)&&(a=a.substr(1)),(6===a.length||3===a.length)&&(b=a),8===a.length&&(c=parseInt(a.substr(0,2),16)/255,b=a.substr(2)),[b,isNaN(c)?void 0:c]}function d(a){return j(a.split(" "))}function g(a){var b=e(a,"coord","gx"),c=[],f=[];0===b.length&&(b=e(a,"gx:coord"));for(var g=0;g<b.length;g++)c.push(d(l(b[g])));for(var h=e(a,"when"),g=0;g<h.length;g++)f.push(l(h[g]));return{coords:c,times:f}}function i(a){var b,c,d,f,j,k=[],o=[];if(h(a,"MultiGeometry"))return i(h(a,"MultiGeometry"));if(h(a,"MultiTrack"))return i(h(a,"MultiTrack"));if(h(a,"gx:MultiTrack"))return i(h(a,"gx:MultiTrack"));for(d=0;d<s.length;d++)if(c=e(a,s[d]))for(f=0;f<c.length;f++)if(b=c[f],"Point"==s[d])k.push({type:"Point",coordinates:m(l(h(b,"coordinates")))});else if("LineString"==s[d])k.push({type:"LineString",coordinates:n(l(h(b,"coordinates")))});else if("Polygon"==s[d]){var p=e(b,"LinearRing"),q=[];for(j=0;j<p.length;j++)q.push(n(l(h(p[j],"coordinates"))));k.push({type:"Polygon",coordinates:q})}else if("Track"==s[d]||"gx:Track"==s[d]){var r=g(b);k.push({type:"LineString",coordinates:r.coords}),r.times.length&&o.push(r.times)}return{geoms:k,coordTimes:o}}function k(a){var b,d=i(a),g={},j=l(h(a,"name")),k=l(h(a,"styleUrl")),m=l(h(a,"description")),n=h(a,"TimeSpan"),o=h(a,"ExtendedData"),p=h(a,"LineStyle"),q=h(a,"PolyStyle");if(!d.geoms.length)return[];if(j&&(g.name=j),k&&r[k]&&(g.styleUrl=k,g.styleHash=r[k]),m&&(g.description=m),n){var s=l(h(n,"begin")),t=l(h(n,"end"));g.timespan={begin:s,end:t}}if(p){var u=c(l(h(p,"color"))),v=u[0],w=u[1],x=parseFloat(l(h(p,"width")));v&&(g.stroke=v),isNaN(w)||(g["stroke-opacity"]=w),isNaN(x)||(g["stroke-width"]=x)}if(q){var y=c(l(h(q,"color"))),z=y[0],A=y[1],B=l(h(q,"fill")),C=l(h(q,"outline"));z&&(g.fill=z),isNaN(A)||(g["fill-opacity"]=A),B&&(g["fill-opacity"]="1"===B?1:0),C&&(g["stroke-opacity"]="1"===C?1:0)}if(o){var D=e(o,"Data"),E=e(o,"SimpleData");for(b=0;b<D.length;b++)g[D[b].getAttribute("name")]=l(h(D[b],"value"));for(b=0;b<E.length;b++)g[E[b].getAttribute("name")]=l(E[b])}d.coordTimes.length&&(g.coordTimes=1===d.coordTimes.length?d.coordTimes[0]:d.coordTimes);var F={type:"Feature",geometry:1===d.geoms.length?d.geoms[0]:{type:"GeometryCollection",geometries:d.geoms},properties:g};return f(a,"id")&&(F.id=f(a,"id")),[F]}for(var o=p(),r={},s=["Polygon","LineString","Point","Track","gx:Track"],t=e(a,"Placemark"),u=e(a,"Style"),v=0;v<u.length;v++)r["#"+f(u[v],"id")]=b(q(u[v])).toString(16);for(var w=0;w<t.length;w++)o.features=o.features.concat(k(t[w]));return o},gpx:function(a){function b(a,b){var c=e(a,b),d=[],f=[],g=c.length;if(!(2>g)){for(var h=0;g>h;h++){var i=o(c[h]);d.push(i.coordinates),i.time&&f.push(i.time)}return{line:d,times:f}}}function c(a){for(var c,d=e(a,"trkseg"),f=[],h=[],i=0;i<d.length;i++)c=b(d[i],"trkpt"),c.line&&f.push(c.line),c.times.length&&h.push(c.times);if(0!==f.length){var j=g(a);return h.length&&(j.coordTimes=1===f.length?h[0]:h),{type:"Feature",properties:j,geometry:{type:1===f.length?"LineString":"MultiLineString",coordinates:1===f.length?f[0]:f}}}}function d(a){var c=b(a,"rtept");if(c){var d={type:"Feature",properties:g(a),geometry:{type:"LineString",coordinates:c}};return c.times.length&&(d.geometry.times=c.times),d}}function f(a){var b=g(a);return b.sym=l(h(a,"sym")),{type:"Feature",properties:b,geometry:{type:"Point",coordinates:o(a).coordinates}}}function g(a){var b,c=["name","desc","author","copyright","link","time","keywords"],d={};for(b=0;b<c.length;b++)d[c[b]]=l(h(a,c[b]));return k(d)}var i,j,m=e(a,"trk"),n=e(a,"rte"),q=e(a,"wpt"),r=p();for(i=0;i<m.length;i++)j=c(m[i]),j&&r.features.push(j);for(i=0;i<n.length;i++)j=d(n[i]),j&&r.features.push(j);for(i=0;i<q.length;i++)r.features.push(f(q[i]));return r}};return v}(),"undefined"!=typeof b&&(b.exports=toGeoJSON)}).call(this,a("_process"))},{_process:4,xmldom:3}],11:[function(b,c,d){!function(){function b(a,b){function c(b){var c,d=a.arcs[0>b?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],0>b?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[0>a?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[0>c?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[0>a?~a:a]||h.push([a])}),h}function d(a,c,d){function e(a){var b=0>a?~a:a;(k[b]||(k[b]=[])).push({i:a,g:j})}function f(a){a.forEach(e)}function g(a){a.forEach(f)}function h(a){"GeometryCollection"===a.type?a.geometries.forEach(h):a.type in l&&(j=a,l[a.type](a.arcs))}var i=[];if(arguments.length>1){var j,k=[],l={LineString:f,MultiLineString:g,Polygon:g,MultiPolygon:function(a){a.forEach(g)}};h(c),k.forEach(arguments.length<3?function(a){i.push(a[0].i)}:function(a){d(a[0].g,a[a.length-1].g)&&i.push(a[0].i)})}else for(var m=0,n=a.arcs.length;n>m;++m)i.push(m);return{type:"MultiLineString",arcs:b(a,i)}}function e(a,c){function d(a){a.forEach(function(b){b.forEach(function(b){(f[b=0>b?~b:b]||(f[b]=[])).push(a)})}),g.push(a)}function e(b){return m(h(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var f={},g=[],i=[];return c.forEach(function(a){"Polygon"===a.type?d(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(d)}),g.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,i.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),g.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:i.map(function(c){var d=[];if(c.forEach(function(a){a.forEach(function(a){a.forEach(function(a){f[0>a?~a:a].length<2&&d.push(a)})})}),d=b(a,d),(n=d.length)>1)for(var g,h=e(c[0][0]),i=0;i<n;++i)if(h===e(d[i])){g=d[0],d[0]=d[i],d[i]=g;break}return d})}}function f(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return g(a,b)})}:g(a,b)}function g(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:h(a,b)};return null==b.id&&delete c.id,c}function h(a,b){function c(a,b){b.length&&b.pop();for(var c,d=k[0>a?~a:a],e=0,f=d.length;f>e;++e)b.push(c=d[e].slice()),j(c,e);0>a&&i(b,f)}function d(a){return a=a.slice(),j(a,0),a}function e(a){for(var b=[],d=0,e=a.length;e>d;++d)c(a[d],b);return b.length<2&&b.push(b[0].slice()),b}function f(a){for(var b=e(a);b.length<4;)b.push(b[0].slice());return b}function g(a){return a.map(f)}function h(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(h)}:b in l?{type:b,coordinates:l[b](a)}:null}var j=r(a.transform),k=a.arcs,l={Point:function(a){return d(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(d)},LineString:function(a){return e(a.arcs)},MultiLineString:function(a){return a.arcs.map(e)},Polygon:function(a){return g(a.arcs)},MultiPolygon:function(a){return a.arcs.map(g)}};return h(b)}function i(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function j(a,b){for(var c=0,d=a.length;d>c;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function k(a){function b(a,b){a.forEach(function(a){0>a&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in g&&g[a.type](a.arcs,b)}var e={},f=a.map(function(){return[]}),g={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var h in e)for(var i=e[h],k=i.length,l=0;k>l;++l)for(var m=l+1;k>m;++m){var n,o=i[l],p=i[m];(n=f[o])[h=j(n,p)]!==p&&n.splice(h,0,p),(n=f[p])[h=j(n,o)]!==o&&n.splice(h,0,o)}return f}function l(a,b){function c(a){g.remove(a),a[1][2]=b(a),g.push(a)}var d,e=r(a.transform),f=s(a.transform),g=q(),h=0;for(b||(b=o),a.arcs.forEach(function(a){var c=[];a.forEach(e);for(var f=1,h=a.length-1;h>f;++f)d=a.slice(f-1,f+2),d[1][2]=b(d),c.push(d),g.push(d);a[0][2]=a[h][2]=1/0;for(var f=0,h=c.length;h>f;++f)d=c[f],d.previous=c[f-1],d.next=c[f+1]});d=g.pop();){var i=d.previous,j=d.next;d[1][2]<h?d[1][2]=h:h=d[1][2],i&&(i.next=j,i[2]=d[2],c(i)),j&&(j.previous=i,j[0]=d[0],c(j))}return a.arcs.forEach(function(a){a.forEach(f)}),a}function m(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return.5*f}function o(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function p(a,b){return a[1][2]-b[1][2]}function q(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(p(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(e>f&&p(d[f],h)<0&&(h=d[g=f]),e>c&&p(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(0>=e)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(p(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function r(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0),a[0]=(b+=a[0])*d+f,a[1]=(c+=a[1])*e+g}}function s(a){if(!a)return t;var b,c,d=a.scale[0],e=a.scale[1],f=a.translate[0],g=a.translate[1];return function(a,h){h||(b=c=0);var i=(a[0]-f)/d|0,j=(a[1]-g)/e|0;a[0]=i-b,a[1]=j-c,b=i,c=j}}function t(){}var u={version:"1.6.8",mesh:function(a){return h(a,d.apply(this,arguments))},meshArcs:d,merge:function(a){return h(a,e.apply(this,arguments))},mergeArcs:e,feature:f,neighbors:k,presimplify:l};"function"==typeof a&&a.amd?a(u):"object"==typeof c&&c.exports?c.exports=u:this.topojson=u}()},{}],12:[function(a,b,c){function d(a){function b(b){var c=a.substring(r).match(b);return c?(r+=c[0].length,c[0]):null}function c(a){return a&&q.match(/\d+/)&&(a.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+q}}),a}function d(){b(/^\s*/)}function e(){d();for(var a,c=0,e=[],g=[e],h=e;a=b(/^(\()/)||b(/^(\))/)||b(/^(\,)/)||b(f);){if("("==a)g.push(h),h=[],g[g.length-1].push(h),c++;else if(")"==a){if(h=g.pop(),!h)return;if(c--,0===c)break}else if(","===a)h=[],g[g.length-1].push(h);else{if(isNaN(parseFloat(a)))return null;h.push(parseFloat(a))}d()}return 0!==c?null:e}function g(){for(var a,c,e=[];c=b(f)||b(/^(\,)/);)","==c?(e.push(a),a=[]):(a||(a=[]),a.push(parseFloat(c))),d();return a&&e.push(a),e.length?e:null}function h(){if(!b(/^(point)/i))return null;if(d(),!b(/^(\()/))return null;var a=g();return a?(d(),b(/^(\))/)?{type:"Point",coordinates:a[0]}:null):null}function i(){if(!b(/^(multipoint)/i))return null;d();var a=e();return a?(d(),{type:"MultiPoint",coordinates:a}):null}function j(){if(!b(/^(multilinestring)/i))return null;d();var a=e();return a?(d(),{type:"MultiLineString",coordinates:a}):null}function k(){if(!b(/^(linestring)/i))return null;if(d(),!b(/^(\()/))return null;var a=g();return a&&b(/^(\))/)?{type:"LineString",coordinates:a}:null}function l(){return b(/^(polygon)/i)?(d(),{type:"Polygon",coordinates:e()}):null}function m(){return b(/^(multipolygon)/i)?(d(),{type:"MultiPolygon",coordinates:e()}):null}function n(){var a,c=[];if(!b(/^(geometrycollection)/i))return null;if(d(),!b(/^(\()/))return null;for(;a=o();)c.push(a),d(),b(/^(\,)/),d();return b(/^(\))/)?{type:"GeometryCollection",geometries:c}:null}function o(){return h()||k()||l()||i()||j()||m()||n()}var p=a.split(";"),a=p.pop(),q=(p.shift()||"").split("=").pop(),r=0;return c(o())}function e(a){function b(a){return 2===a.length?a[0]+" "+a[1]:3===a.length?a[0]+" "+a[1]+" "+a[2]:void 0}function c(a){return a.map(b).join(", ")}function d(a){return a.map(c).map(g).join(", ")}function f(a){return a.map(d).map(g).join(", ")}function g(a){return"("+a+")"}switch("Feature"===a.type&&(a=a.geometry),a.type){case"Point":return"POINT ("+b(a.coordinates)+")";case"LineString":return"LINESTRING ("+c(a.coordinates)+")";case"Polygon":return"POLYGON ("+d(a.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+c(a.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+f(a.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+d(a.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+a.geometries.map(e).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}b.exports=d,b.exports.parse=d,b.exports.stringify=e;var f=/^[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/},{}]},{},[1])(1)}),!function(a,b,c){function d(){var b=a.L;e.noConflict=function(){return a.L=b,this},a.L=e}var e={version:"1.0.0-beta.2"};"object"==typeof module&&"object"==typeof module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e),"undefined"!=typeof a&&d(),e.Util={extend:function(a){var b,c,d,e;for(c=1,d=arguments.length;d>c;c++){e=arguments[c];for(b in e)a[b]=e[b]}return a},create:Object.create||function(){function a(){}return function(b){return a.prototype=b,new a}}(),bind:function(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}},stamp:function(a){return a._leaflet_id=a._leaflet_id||++e.Util.lastId,a._leaflet_id},lastId:0,throttle:function(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)}},wrapNum:function(a,b,c){var d=b[1],e=b[0],f=d-e;return a===d&&c?a:((a-e)%f+f)%f+e},falseFn:function(){return!1},formatNum:function(a,b){var c=Math.pow(10,b||5);return Math.round(a*c)/c},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},splitWords:function(a){return e.Util.trim(a).split(/\s+/)},setOptions:function(a,b){a.hasOwnProperty("options")||(a.options=a.options?e.Util.create(a.options):{});for(var c in b)a.options[c]=b[c];return a.options},getParamString:function(a,b,c){var d=[];for(var e in a)d.push(encodeURIComponent(c?e.toUpperCase():e)+"="+encodeURIComponent(a[e]));return(b&&-1!==b.indexOf("?")?"&":"?")+d.join("&")},template:function(a,b){return a.replace(e.Util.templateRe,function(a,d){var e=b[d];if(e===c)throw new Error("No value provided for variable "+a);return"function"==typeof e&&(e=e(b)),e})},templateRe:/\{ *([\w_]+) *\}/g,isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},indexOf:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function b(b){return a["webkit"+b]||a["moz"+b]||a["ms"+b]}function c(b){var c=+new Date,e=Math.max(0,16-(c-d));return d=c+e,a.setTimeout(b,e)}var d=0,f=a.requestAnimationFrame||b("RequestAnimationFrame")||c,g=a.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(b){a.clearTimeout(b)};e.Util.requestAnimFrame=function(b,d,g){return g&&f===c?void b.call(d):f.call(a,e.bind(b,d))},e.Util.cancelAnimFrame=function(b){b&&g.call(a,b)}}(),e.extend=e.Util.extend,e.bind=e.Util.bind,e.stamp=e.Util.stamp,e.setOptions=e.Util.setOptions,e.Class=function(){},e.Class.extend=function(a){var b=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=b.__super__=this.prototype,d=e.Util.create(c);d.constructor=b,b.prototype=d;for(var f in this)this.hasOwnProperty(f)&&"prototype"!==f&&(b[f]=this[f]);return a.statics&&(e.extend(b,a.statics),delete a.statics),a.includes&&(e.Util.extend.apply(null,[d].concat(a.includes)),delete a.includes),d.options&&(a.options=e.Util.extend(e.Util.create(d.options),a.options)),e.extend(d,a),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var a=0,b=d._initHooks.length;b>a;a++)d._initHooks[a].call(this)}},b},e.Class.include=function(a){e.extend(this.prototype,a)},e.Class.mergeOptions=function(a){e.extend(this.prototype.options,a)},e.Class.addInitHook=function(a){var b=Array.prototype.slice.call(arguments,1),c="function"==typeof a?a:function(){this[a].apply(this,b)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c)},e.Evented=e.Class.extend({on:function(a,b,c){if("object"==typeof a)for(var d in a)this._on(d,a[d],b);else{a=e.Util.splitWords(a);for(var f=0,g=a.length;g>f;f++)this._on(a[f],b,c)}return this},off:function(a,b,c){if(a)if("object"==typeof a)for(var d in a)this._off(d,a[d],b);else{a=e.Util.splitWords(a);for(var f=0,g=a.length;g>f;f++)this._off(a[f],b,c)}else delete this._events;return this},_on:function(a,b,c){var d=this._events=this._events||{},f=c&&c!==this&&e.stamp(c);if(f){var g=a+"_idx",h=a+"_len",i=d[g]=d[g]||{},j=e.stamp(b)+"_"+f;i[j]||(i[j]={fn:b,ctx:c},d[h]=(d[h]||0)+1)}else d[a]=d[a]||[],d[a].push({fn:b})},_off:function(a,b,c){var d=this._events,f=a+"_idx",g=a+"_len";if(d){if(!b)return delete d[a],delete d[f],void delete d[g];var h,i,j,k,l,m=c&&c!==this&&e.stamp(c);if(m)l=e.stamp(b)+"_"+m,h=d[f],h&&h[l]&&(k=h[l],delete h[l],d[g]--);else if(h=d[a])for(i=0,j=h.length;j>i;i++)if(h[i].fn===b){k=h[i],h.splice(i,1);break}k&&(k.fn=e.Util.falseFn)}},fire:function(a,b,c){if(!this.listens(a,c))return this;var d=e.Util.extend({},b,{type:a,target:this}),f=this._events;if(f){var g,h,i,j,k=f[a+"_idx"];if(f[a])for(i=f[a].slice(),g=0,h=i.length;h>g;g++)i[g].fn.call(this,d);for(j in k)k[j].fn.call(k[j].ctx,d)}return c&&this._propagateEvent(d),this},listens:function(a,b){var c=this._events;if(c&&(c[a]||c[a+"_len"]))return!0;if(b)for(var d in this._eventParents)if(this._eventParents[d].listens(a,b))return!0;return!1},once:function(a,b,c){if("object"==typeof a){for(var d in a)this.once(d,a[d],b);return this}var f=e.bind(function(){this.off(a,b,c).off(a,f,c)},this);return this.on(a,b,c).on(a,f,c)},addEventParent:function(a){
return this._eventParents=this._eventParents||{},this._eventParents[e.stamp(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[e.stamp(a)],this},_propagateEvent:function(a){for(var b in this._eventParents)this._eventParents[b].fire(a.type,e.extend({layer:a.target},a),!0)}});var f=e.Evented.prototype;f.addEventListener=f.on,f.removeEventListener=f.clearAllEventListeners=f.off,f.addOneTimeEventListener=f.once,f.fireEvent=f.fire,f.hasEventListeners=f.listens,e.Mixin={Events:f},function(){var c=navigator.userAgent.toLowerCase(),d=b.documentElement,f="ActiveXObject"in a,g=-1!==c.indexOf("webkit"),h=-1!==c.indexOf("phantom"),i=-1!==c.search("android [23]"),j=-1!==c.indexOf("chrome"),k=-1!==c.indexOf("gecko")&&!g&&!a.opera&&!f,l="undefined"!=typeof orientation||-1!==c.indexOf("mobile"),m=!a.PointerEvent&&a.MSPointerEvent,n=a.PointerEvent&&navigator.pointerEnabled||m,o=f&&"transition"in d.style,p="WebKitCSSMatrix"in a&&"m11"in new a.WebKitCSSMatrix&&!i,q="MozPerspective"in d.style,r="OTransition"in d.style,s=!a.L_NO_TOUCH&&!h&&(n||"ontouchstart"in a||a.DocumentTouch&&b instanceof a.DocumentTouch);e.Browser={ie:f,ielt9:f&&!b.addEventListener,webkit:g,gecko:k,android:-1!==c.indexOf("android"),android23:i,chrome:j,safari:!j&&-1!==c.indexOf("safari"),ie3d:o,webkit3d:p,gecko3d:q,opera12:r,any3d:!a.L_DISABLE_3D&&(o||p||q)&&!r&&!h,mobile:l,mobileWebkit:l&&g,mobileWebkit3d:l&&p,mobileOpera:l&&a.opera,mobileGecko:l&&k,touch:!!s,msPointer:!!m,pointer:!!n,retina:(a.devicePixelRatio||a.screen.deviceXDPI/a.screen.logicalXDPI)>1}}(),e.Point=function(a,b,c){this.x=c?Math.round(a):a,this.y=c?Math.round(b):b},e.Point.prototype={clone:function(){return new e.Point(this.x,this.y)},add:function(a){return this.clone()._add(e.point(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(e.point(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new e.Point(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new e.Point(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(a){a=e.point(a);var b=a.x-this.x,c=a.y-this.y;return Math.sqrt(b*b+c*c)},equals:function(a){return a=e.point(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=e.point(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+e.Util.formatNum(this.x)+", "+e.Util.formatNum(this.y)+")"}},e.point=function(a,b,d){return a instanceof e.Point?a:e.Util.isArray(a)?new e.Point(a[0],a[1]):a===c||null===a?a:new e.Point(a,b,d)},e.Bounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.Bounds.prototype={extend:function(a){return a=e.point(a),this.min||this.max?(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(a.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(a.y,this.max.y)):(this.min=a.clone(),this.max=a.clone()),this},getCenter:function(a){return new e.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return new e.Point(this.min.x,this.max.y)},getTopRight:function(){return new e.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var b,c;return a="number"==typeof a[0]||a instanceof e.Point?e.point(a):e.bounds(a),a instanceof e.Bounds?(b=a.min,c=a.max):b=c=a,b.x>=this.min.x&&c.x<=this.max.x&&b.y>=this.min.y&&c.y<=this.max.y},intersects:function(a){a=e.bounds(a);var b=this.min,c=this.max,d=a.min,f=a.max,g=f.x>=b.x&&d.x<=c.x,h=f.y>=b.y&&d.y<=c.y;return g&&h},overlaps:function(a){a=e.bounds(a);var b=this.min,c=this.max,d=a.min,f=a.max,g=f.x>b.x&&d.x<c.x,h=f.y>b.y&&d.y<c.y;return g&&h},isValid:function(){return!(!this.min||!this.max)}},e.bounds=function(a,b){return!a||a instanceof e.Bounds?a:new e.Bounds(a,b)},e.Transformation=function(a,b,c,d){this._a=a,this._b=b,this._c=c,this._d=d},e.Transformation.prototype={transform:function(a,b){return this._transform(a.clone(),b)},_transform:function(a,b){return b=b||1,a.x=b*(this._a*a.x+this._b),a.y=b*(this._c*a.y+this._d),a},untransform:function(a,b){return b=b||1,new e.Point((a.x/b-this._b)/this._a,(a.y/b-this._d)/this._c)}},e.DomUtil={get:function(a){return"string"==typeof a?b.getElementById(a):a},getStyle:function(a,c){var d=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!d||"auto"===d)&&b.defaultView){var e=b.defaultView.getComputedStyle(a,null);d=e?e[c]:null}return"auto"===d?null:d},create:function(a,c,d){var e=b.createElement(a);return e.className=c,d&&d.appendChild(e),e},remove:function(a){var b=a.parentNode;b&&b.removeChild(a)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},toFront:function(a){a.parentNode.appendChild(a)},toBack:function(a){var b=a.parentNode;b.insertBefore(a,b.firstChild)},hasClass:function(a,b){if(a.classList!==c)return a.classList.contains(b);var d=e.DomUtil.getClass(a);return d.length>0&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(d)},addClass:function(a,b){if(a.classList!==c)for(var d=e.Util.splitWords(b),f=0,g=d.length;g>f;f++)a.classList.add(d[f]);else if(!e.DomUtil.hasClass(a,b)){var h=e.DomUtil.getClass(a);e.DomUtil.setClass(a,(h?h+" ":"")+b)}},removeClass:function(a,b){a.classList!==c?a.classList.remove(b):e.DomUtil.setClass(a,e.Util.trim((" "+e.DomUtil.getClass(a)+" ").replace(" "+b+" "," ")))},setClass:function(a,b){a.className.baseVal===c?a.className=b:a.className.baseVal=b},getClass:function(a){return a.className.baseVal===c?a.className:a.className.baseVal},setOpacity:function(a,b){"opacity"in a.style?a.style.opacity=b:"filter"in a.style&&e.DomUtil._setOpacityIE(a,b)},_setOpacityIE:function(a,b){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=a.filters.item(d)}catch(e){if(1===b)return}b=Math.round(100*b),c?(c.Enabled=100!==b,c.Opacity=b):a.style.filter+=" progid:"+d+"(opacity="+b+")"},testProp:function(a){for(var c=b.documentElement.style,d=0;d<a.length;d++)if(a[d]in c)return a[d];return!1},setTransform:function(a,b,c){var d=b||new e.Point(0,0);a.style[e.DomUtil.TRANSFORM]=(e.Browser.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")},setPosition:function(a,b){a._leaflet_pos=b,e.Browser.any3d?e.DomUtil.setTransform(a,b):(a.style.left=b.x+"px",a.style.top=b.y+"px")},getPosition:function(a){return a._leaflet_pos}},function(){e.DomUtil.TRANSFORM=e.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var c=e.DomUtil.TRANSITION=e.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(e.DomUtil.TRANSITION_END="webkitTransition"===c||"OTransition"===c?c+"End":"transitionend","onselectstart"in b)e.DomUtil.disableTextSelection=function(){e.DomEvent.on(a,"selectstart",e.DomEvent.preventDefault)},e.DomUtil.enableTextSelection=function(){e.DomEvent.off(a,"selectstart",e.DomEvent.preventDefault)};else{var d=e.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);e.DomUtil.disableTextSelection=function(){if(d){var a=b.documentElement.style;this._userSelect=a[d],a[d]="none"}},e.DomUtil.enableTextSelection=function(){d&&(b.documentElement.style[d]=this._userSelect,delete this._userSelect)}}e.DomUtil.disableImageDrag=function(){e.DomEvent.on(a,"dragstart",e.DomEvent.preventDefault)},e.DomUtil.enableImageDrag=function(){e.DomEvent.off(a,"dragstart",e.DomEvent.preventDefault)},e.DomUtil.preventOutline=function(b){for(;-1===b.tabIndex;)b=b.parentNode;b&&b.style&&(e.DomUtil.restoreOutline(),this._outlineElement=b,this._outlineStyle=b.style.outline,b.style.outline="none",e.DomEvent.on(a,"keydown",e.DomUtil.restoreOutline,this))},e.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,e.DomEvent.off(a,"keydown",e.DomUtil.restoreOutline,this))}}(),e.LatLng=function(a,b,d){if(isNaN(a)||isNaN(b))throw new Error("Invalid LatLng object: ("+a+", "+b+")");this.lat=+a,this.lng=+b,d!==c&&(this.alt=+d)},e.LatLng.prototype={equals:function(a,b){if(!a)return!1;a=e.latLng(a);var d=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return(b===c?1e-9:b)>=d},toString:function(a){return"LatLng("+e.Util.formatNum(this.lat,a)+", "+e.Util.formatNum(this.lng,a)+")"},distanceTo:function(a){return e.CRS.Earth.distance(this,e.latLng(a))},wrap:function(){return e.CRS.Earth.wrapLatLng(this)},toBounds:function(a){var b=180*a/40075017,c=b/Math.cos(Math.PI/180*this.lat);return e.latLngBounds([this.lat-b,this.lng-c],[this.lat+b,this.lng+c])},clone:function(){return new e.LatLng(this.lat,this.lng,this.alt)}},e.latLng=function(a,b,d){return a instanceof e.LatLng?a:e.Util.isArray(a)&&"object"!=typeof a[0]?3===a.length?new e.LatLng(a[0],a[1],a[2]):2===a.length?new e.LatLng(a[0],a[1]):null:a===c||null===a?a:"object"==typeof a&&"lat"in a?new e.LatLng(a.lat,"lng"in a?a.lng:a.lon,a.alt):b===c?null:new e.LatLng(a,b,d)},e.LatLngBounds=function(a,b){if(a)for(var c=b?[a,b]:a,d=0,e=c.length;e>d;d++)this.extend(c[d])},e.LatLngBounds.prototype={extend:function(a){var b,c,d=this._southWest,f=this._northEast;if(a instanceof e.LatLng)b=a,c=a;else{if(!(a instanceof e.LatLngBounds))return a?this.extend(e.latLng(a)||e.latLngBounds(a)):this;if(b=a._southWest,c=a._northEast,!b||!c)return this}return d||f?(d.lat=Math.min(b.lat,d.lat),d.lng=Math.min(b.lng,d.lng),f.lat=Math.max(c.lat,f.lat),f.lng=Math.max(c.lng,f.lng)):(this._southWest=new e.LatLng(b.lat,b.lng),this._northEast=new e.LatLng(c.lat,c.lng)),this},pad:function(a){var b=this._southWest,c=this._northEast,d=Math.abs(b.lat-c.lat)*a,f=Math.abs(b.lng-c.lng)*a;return new e.LatLngBounds(new e.LatLng(b.lat-d,b.lng-f),new e.LatLng(c.lat+d,c.lng+f))},getCenter:function(){return new e.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new e.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new e.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){a="number"==typeof a[0]||a instanceof e.LatLng?e.latLng(a):e.latLngBounds(a);var b,c,d=this._southWest,f=this._northEast;return a instanceof e.LatLngBounds?(b=a.getSouthWest(),c=a.getNorthEast()):b=c=a,b.lat>=d.lat&&c.lat<=f.lat&&b.lng>=d.lng&&c.lng<=f.lng},intersects:function(a){a=e.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>=b.lat&&d.lat<=c.lat,h=f.lng>=b.lng&&d.lng<=c.lng;return g&&h},overlaps:function(a){a=e.latLngBounds(a);var b=this._southWest,c=this._northEast,d=a.getSouthWest(),f=a.getNorthEast(),g=f.lat>b.lat&&d.lat<c.lat,h=f.lng>b.lng&&d.lng<c.lng;return g&&h},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a){return a?(a=e.latLngBounds(a),this._southWest.equals(a.getSouthWest())&&this._northEast.equals(a.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},e.latLngBounds=function(a,b){return!a||a instanceof e.LatLngBounds?a:new e.LatLngBounds(a,b)},e.Projection={},e.Projection.LonLat={project:function(a){return new e.Point(a.lng,a.lat)},unproject:function(a){return new e.LatLng(a.y,a.x)},bounds:e.bounds([-180,-90],[180,90])},e.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(a){var b=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,a.lat),-c),f=Math.sin(d*b);return new e.Point(this.R*a.lng*b,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(a){var b=180/Math.PI;return new e.LatLng((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*b,a.x*b/this.R)},bounds:function(){var a=6378137*Math.PI;return e.bounds([-a,-a],[a,a])}()},e.CRS={latLngToPoint:function(a,b){var c=this.projection.project(a),d=this.scale(b);return this.transformation._transform(c,d)},pointToLatLng:function(a,b){var c=this.scale(b),d=this.transformation.untransform(a,c);return this.projection.unproject(d)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var b=this.projection.bounds,c=this.scale(a),d=this.transformation.transform(b.min,c),f=this.transformation.transform(b.max,c);return e.bounds(d,f)},wrapLatLng:function(a){var b=this.wrapLng?e.Util.wrapNum(a.lng,this.wrapLng,!0):a.lng,c=this.wrapLat?e.Util.wrapNum(a.lat,this.wrapLat,!0):a.lat,d=a.alt;return e.latLng(c,b,d)}},e.CRS.Simple=e.extend({},e.CRS,{projection:e.Projection.LonLat,transformation:new e.Transformation(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,b){var c=b.lng-a.lng,d=b.lat-a.lat;return Math.sqrt(c*c+d*d)},infinite:!0}),e.CRS.Earth=e.extend({},e.CRS,{wrapLng:[-180,180],R:6378137,distance:function(a,b){var c=Math.PI/180,d=a.lat*c,e=b.lat*c,f=Math.sin(d)*Math.sin(e)+Math.cos(d)*Math.cos(e)*Math.cos((b.lng-a.lng)*c);return this.R*Math.acos(Math.min(f,1))}}),e.CRS.EPSG3857=e.extend({},e.CRS.Earth,{code:"EPSG:3857",projection:e.Projection.SphericalMercator,transformation:function(){var a=.5/(Math.PI*e.Projection.SphericalMercator.R);return new e.Transformation(a,.5,-a,.5)}()}),e.CRS.EPSG900913=e.extend({},e.CRS.EPSG3857,{code:"EPSG:900913"}),e.CRS.EPSG4326=e.extend({},e.CRS.Earth,{code:"EPSG:4326",projection:e.Projection.LonLat,transformation:new e.Transformation(1/180,1,-1/180,.5)}),e.Map=e.Evented.extend({options:{crs:e.CRS.EPSG3857,fadeAnimation:!0,trackResize:!0,markerZoomAnimation:!0,maxBoundsViscosity:0,transform3DLimit:8388608},initialize:function(a,b){b=e.setOptions(this,b),this._initContainer(a),this._initLayout(),this._onResize=e.bind(this._onResize,this),this._initEvents(),b.maxBounds&&this.setMaxBounds(b.maxBounds),b.zoom!==c&&(this._zoom=this._limitZoom(b.zoom)),b.center&&b.zoom!==c&&this.setView(e.latLng(b.center),b.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._addLayers(this.options.layers)},setView:function(a,b){return b=b===c?this.getZoom():b,this._resetView(e.latLng(a),b),this},setZoom:function(a,b){return this._loaded?this.setView(this.getCenter(),a,{zoom:b}):(this._zoom=a,this)},zoomIn:function(a,b){return this.setZoom(this._zoom+(a||1),b)},zoomOut:function(a,b){return this.setZoom(this._zoom-(a||1),b)},setZoomAround:function(a,b,c){var d=this.getZoomScale(b),f=this.getSize().divideBy(2),g=a instanceof e.Point?a:this.latLngToContainerPoint(a),h=g.subtract(f).multiplyBy(1-1/d),i=this.containerPointToLatLng(f.add(h));return this.setView(i,b,{zoom:c})},_getBoundsCenterZoom:function(a,b){b=b||{},a=a.getBounds?a.getBounds():e.latLngBounds(a);var c=e.point(b.paddingTopLeft||b.padding||[0,0]),d=e.point(b.paddingBottomRight||b.padding||[0,0]),f=this.getBoundsZoom(a,!1,c.add(d));f=b.maxZoom?Math.min(b.maxZoom,f):f;var g=d.subtract(c).divideBy(2),h=this.project(a.getSouthWest(),f),i=this.project(a.getNorthEast(),f),j=this.unproject(h.add(i).divideBy(2).add(g),f);return{center:j,zoom:f}},fitBounds:function(a,b){var c=this._getBoundsCenterZoom(a,b);return this.setView(c.center,c.zoom,b)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,b){return this.setView(a,this._zoom,{pan:b})},panBy:function(a){return this.fire("movestart"),this._rawPanBy(e.point(a)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(a){return(a=e.latLngBounds(a))?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):this.off("moveend",this._panInsideMaxBounds)},setMinZoom:function(a){return this.options.minZoom=a,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(a):this},setMaxZoom:function(a){return this.options.maxZoom=a,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(a):this},panInsideBounds:function(a,b){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,e.latLngBounds(a));return c.equals(d)?this:(this.panTo(d,b),this._enforcingBounds=!1,this)},invalidateSize:function(a){if(!this._loaded)return this;a=e.extend({animate:!1,pan:!0},a===!0?{animate:!0}:a);var b=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=b.divideBy(2).round(),f=c.divideBy(2).round(),g=d.subtract(f);return g.x||g.y?(a.animate&&a.pan?this.panBy(g):(a.pan&&this._rawPanBy(g),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:b,newSize:c})):this},stop:function(){return e.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},addHandler:function(a,b){if(!b)return this;var c=this[a]=new b(this);return this._handlers.push(c),this.options[a]&&c.enable(),this},remove:function(){this._initEvents(!0);try{delete this._container._leaflet}catch(a){this._container._leaflet=c}e.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var b in this._layers)this._layers[b].remove();return this},createPane:function(a,b){var c="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),d=e.DomUtil.create("div",c,b||this._mapPane);return a&&(this._panes[a]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),b=this.unproject(a.getBottomLeft()),c=this.unproject(a.getTopRight());return new e.LatLngBounds(b,c)},getMinZoom:function(){return this.options.minZoom===c?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===c?this._layersMaxZoom===c?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,b,c){a=e.latLngBounds(a);var d,f=this.getMinZoom()-(b?1:0),g=this.getMaxZoom(),h=this.getSize(),i=a.getNorthWest(),j=a.getSouthEast(),k=!0;c=e.point(c||[0,0]);do f++,d=this.project(j,f).subtract(this.project(i,f)).add(c).floor(),k=b?d.x<h.x||d.y<h.y:h.contains(d);while(k&&g>=f);return k&&b?null:b?f:f-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new e.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,b){var c=this._getTopLeftPoint(a,b);return new e.Bounds(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===c?this.getZoom():a)},getPane:function(a){return"string"==typeof a?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,b){var d=this.options.crs;return b=b===c?this._zoom:b,d.scale(a)/d.scale(b)},getScaleZoom:function(a,b){var d=this.options.crs;return b=b===c?this._zoom:b,d.zoom(a*d.scale(b))},project:function(a,b){return b=b===c?this._zoom:b,this.options.crs.latLngToPoint(e.latLng(a),b)},unproject:function(a,b){return b=b===c?this._zoom:b,this.options.crs.pointToLatLng(e.point(a),b)},layerPointToLatLng:function(a){var b=e.point(a).add(this.getPixelOrigin());return this.unproject(b)},latLngToLayerPoint:function(a){var b=this.project(e.latLng(a))._round();return b._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(e.latLng(a))},distance:function(a,b){return this.options.crs.distance(e.latLng(a),e.latLng(b))},containerPointToLayerPoint:function(a){return e.point(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return e.point(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var b=this.containerPointToLayerPoint(e.point(a));return this.layerPointToLatLng(b)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(e.latLng(a)))},mouseEventToContainerPoint:function(a){return e.DomEvent.getMousePosition(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var b=this._container=e.DomUtil.get(a);if(!b)throw new Error("Map container not found.");if(b._leaflet)throw new Error("Map container is already initialized.");e.DomEvent.addListener(b,"scroll",this._onScroll,this),b._leaflet=!0},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&e.Browser.any3d,e.DomUtil.addClass(a,"leaflet-container"+(e.Browser.touch?" leaflet-touch":"")+(e.Browser.retina?" leaflet-retina":"")+(e.Browser.ielt9?" leaflet-oldie":"")+(e.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var b=e.DomUtil.getStyle(a,"position");"absolute"!==b&&"relative"!==b&&"fixed"!==b&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),e.DomUtil.setPosition(this._mapPane,new e.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(e.DomUtil.addClass(a.markerPane,"leaflet-zoom-hide"),e.DomUtil.addClass(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,b){e.DomUtil.setPosition(this._mapPane,new e.Point(0,0));var c=!this._loaded;this._loaded=!0,b=this._limitZoom(b);var d=this._zoom!==b;this._moveStart(d)._move(a,b)._moveEnd(d),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(a){return a&&this.fire("zoomstart"),this.fire("movestart")},_move:function(a,b,d){b===c&&(b=this._zoom);var e=this._zoom!==b;return this._zoom=b,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),e&&this.fire("zoom",d),this.fire("move",d)},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_rawPanBy:function(a){e.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){if(e.DomEvent){this._targets={},this._targets[e.stamp(this._container)]=this;var c=b?"off":"on";e.DomEvent[c](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e.DomEvent[c](a,"resize",this._onResize,this),e.Browser.any3d&&this.options.transform3DLimit&&this[c]("moveend",this._onMoveEnd)}},_onResize:function(){e.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=e.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,b){for(var c,d=[],f="mouseout"===b||"mouseover"===b,g=a.target||a.srcElement;g;){if(c=this._targets[e.stamp(g)],c&&c.listens(b,!0)){if(f&&!e.DomEvent._isExternalTarget(g,a))break;if(d.push(c),f)break}if(g===this._container)break;g=g.parentNode}return d.length||f||!e.DomEvent._isExternalTarget(g,a)||(d=[this]),d},_handleDOMEvent:function(a){if(this._loaded&&!e.DomEvent._skipped(a)){var b="keypress"===a.type&&13===a.keyCode?"click":a.type;if("click"===a.type){var c=e.Util.extend({},a);c.type="preclick",this._handleDOMEvent(c)}"mousedown"===b&&e.DomUtil.preventOutline(a.target||a.srcElement),this._fireDOMEvent(a,b)}},_fireDOMEvent:function(a,b,c){if(!a._stopped&&(c=(c||[]).concat(this._findEventTargets(a,b)),c.length)){var d=c[0];if("contextmenu"===b&&d.listens(b,!0)&&e.DomEvent.preventDefault(a),"click"!==a.type&&"preclick"!==a.type||a._simulated||!this._draggableMoved(d)){var f={originalEvent:a};if("keypress"!==a.type){var g=d instanceof e.Marker;f.containerPoint=g?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(a),f.layerPoint=this.containerPointToLayerPoint(f.containerPoint),f.latlng=g?d.getLatLng():this.layerPointToLatLng(f.layerPoint)}for(var h=0;h<c.length;h++)if(c[h].fire(b,f,!0),f.originalEvent._stopped||c[h].options.nonBubblingEvents&&-1!==e.Util.indexOf(c[h].options.nonBubblingEvents,b))return}}},_draggableMoved:function(a){return a=a.options.draggable?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,b=this._handlers.length;b>a;a++)this._handlers[a].disable()},whenReady:function(a,b){return this._loaded?a.call(b||this,{target:this}):this.on("load",a,b),this},_getMapPanePos:function(){return e.DomUtil.getPosition(this._mapPane)||new e.Point(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,b){var d=a&&b!==c?this._getNewPixelOrigin(a,b):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,b){var c=this.getSize()._divideBy(2);return this.project(a,b)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,b,c){var d=this._getNewPixelOrigin(c,b);return this.project(a,b)._subtract(d)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,b,c){if(!c)return a;var d=this.project(a,b),f=this.getSize().divideBy(2),g=new e.Bounds(d.subtract(f),d.add(f)),h=this._getBoundsOffset(g,c,b);return this.unproject(d.add(h),b)},_limitOffset:function(a,b){if(!b)return a;var c=this.getPixelBounds(),d=new e.Bounds(c.min.add(a),c.max.add(a));return a.add(this._getBoundsOffset(d,b))},_getBoundsOffset:function(a,b,c){var d=this.project(b.getNorthWest(),c).subtract(a.min),f=this.project(b.getSouthEast(),c).subtract(a.max),g=this._rebound(d.x,-f.x),h=this._rebound(d.y,-f.y);return new e.Point(g,h)},_rebound:function(a,b){return a+b>0?Math.round(a-b)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(b))},_limitZoom:function(a){var b=this.getMinZoom(),c=this.getMaxZoom();return e.Browser.any3d||(a=Math.round(a)),Math.max(b,Math.min(c,a))}}),e.map=function(a,b){return new e.Map(a,b)},e.Layer=e.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[e.stamp(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[e.stamp(a)],this},_layerAdd:function(a){var b=a.target;b.hasLayer(this)&&(this._map=b,this._zoomAnimated=b._zoomAnimated,this.getEvents&&b.on(this.getEvents(),this),this.onAdd(b),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),b.fire("layeradd",{layer:this}))}}),e.Map.include({addLayer:function(a){var b=e.stamp(a);return this._layers[b]?a:(this._layers[b]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var b=e.stamp(a);return this._layers[b]?(this._loaded&&a.onRemove(this),a.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(a.getAttribution()),a.getEvents&&this.off(a.getEvents(),a),delete this._layers[b],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return!!a&&e.stamp(a)in this._layers},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},_addLayers:function(a){a=a?e.Util.isArray(a)?a:[a]:[];for(var b=0,c=a.length;c>b;b++)this.addLayer(a[b])},_addZoomLimit:function(a){(isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[e.stamp(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var b=e.stamp(a);this._zoomBoundLayers[b]&&(delete this._zoomBoundLayers[b],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,b=-(1/0),d=this._getZoomSpan();for(var e in this._zoomBoundLayers){var f=this._zoomBoundLayers[e].options;a=f.minZoom===c?a:Math.min(a,f.minZoom),b=f.maxZoom===c?b:Math.max(b,f.maxZoom)}this._layersMaxZoom=b===-(1/0)?c:b,this._layersMinZoom=a===1/0?c:a,d!==this._getZoomSpan()&&this.fire("zoomlevelschange")}}),e.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:e.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(a){var b=Math.PI/180,c=this.R,d=a.lat*b,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),h=g*Math.sin(d),i=Math.tan(Math.PI/4-d/2)/Math.pow((1-h)/(1+h),g/2);return d=-c*Math.log(Math.max(i,1e-10)),new e.Point(a.lng*b*c,d)},unproject:function(a){for(var b,c=180/Math.PI,d=this.R,f=this.R_MINOR/d,g=Math.sqrt(1-f*f),h=Math.exp(-a.y/d),i=Math.PI/2-2*Math.atan(h),j=0,k=.1;15>j&&Math.abs(k)>1e-7;j++)b=g*Math.sin(i),b=Math.pow((1-b)/(1+b),g/2),k=Math.PI/2-2*Math.atan(h*b)-i,i+=k;return new e.LatLng(i*c,a.x*c/d)}},e.CRS.EPSG3395=e.extend({},e.CRS.Earth,{code:"EPSG:3395",projection:e.Projection.Mercator,transformation:function(){var a=.5/(Math.PI*e.Projection.Mercator.R);return new e.Transformation(a,.5,-a,.5)}()}),e.GridLayer=e.Layer.extend({options:{pane:"tilePane",tileSize:256,opacity:1,zIndex:1,updateWhenIdle:e.Browser.mobile,updateInterval:200,attribution:null,bounds:null,minZoom:0},initialize:function(a){a=e.setOptions(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){e.DomUtil.remove(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(e.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(e.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){
var a={viewreset:this._resetAll,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=e.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return b.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof e.Point?a:new e.Point(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==c&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var b,c=this.getPane().children,d=-a(-(1/0),1/0),e=0,f=c.length;f>e;e++)b=c[e].style.zIndex,c[e]!==this._container&&b&&(d=a(d,+b));isFinite(d)&&(this.options.zIndex=d+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!e.Browser.ielt9&&this._map._fadeAnimated){e.DomUtil.setOpacity(this._container,this.options.opacity);var a=+new Date,b=!1,c=!1;for(var d in this._tiles){var f=this._tiles[d];if(f.current&&f.loaded){var g=Math.min(1,(a-f.loaded)/200);e.DomUtil.setOpacity(f.el,g),1>g?b=!0:(f.active&&(c=!0),f.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),b&&(e.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=e.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=e.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,b=this.options.maxZoom;for(var c in this._levels)this._levels[c].el.children.length||c===a?this._levels[c].el.style.zIndex=b-Math.abs(a-c):(e.DomUtil.remove(this._levels[c].el),delete this._levels[c]);var d=this._levels[a],f=this._map;return d||(d=this._levels[a]={},d.el=e.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=b,d.origin=f.project(f.unproject(f.getPixelOrigin()),a).round(),d.zoom=a,this._setZoomTransform(d,f.getCenter(),f.getZoom()),e.Util.falseFn(d.el.offsetWidth)),this._level=d,d},_pruneTiles:function(){var a,b,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom)return this._removeAllTiles();for(a in this._tiles)b=this._tiles[a],b.retain=b.current;for(a in this._tiles)if(b=this._tiles[a],b.current&&!b.active){var d=b.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_resetAll:function(){for(var a in this._levels)e.DomUtil.remove(this._levels[a].el),delete this._levels[a];this._removeAllTiles(),this._tileZoom=null,this._resetView()},_retainParent:function(a,b,c,d){var e=Math.floor(a/2),f=Math.floor(b/2),g=c-1,h=e+":"+f+":"+g,i=this._tiles[h];return i&&i.active?(i.retain=!0,!0):(i&&i.loaded&&(i.retain=!0),g>d?this._retainParent(e,f,g,d):!1)},_retainChildren:function(a,b,c,d){for(var e=2*a;2*a+2>e;e++)for(var f=2*b;2*b+2>f;f++){var g=e+":"+f+":"+(c+1),h=this._tiles[g];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),d>c+1&&this._retainChildren(e,f,c+1,d))}},_resetView:function(a){var b=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),b,b)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_setView:function(a,b,d,e){var f=Math.round(b);(this.options.maxZoom!==c&&f>this.options.maxZoom||this.options.minZoom!==c&&f<this.options.minZoom)&&(f=c);var g=f!==this._tileZoom;(!e||g)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==c&&this._update(a),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(a,b)},_setZoomTransforms:function(a,b){for(var c in this._levels)this._setZoomTransform(this._levels[c],a,b)},_setZoomTransform:function(a,b,c){var d=this._map.getZoomScale(c,a.zoom),f=a.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(b,c)).round();e.Browser.any3d?e.DomUtil.setTransform(a.el,f,d):e.DomUtil.setPosition(a.el,f)},_resetGrid:function(){var a=this._map,b=a.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,e=this._map.getPixelWorldBounds(this._tileZoom);e&&(this._globalTileRange=this._pxBoundsToTileRange(e)),this._wrapX=b.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,b.wrapLng[0]],d).x/c.x),Math.ceil(a.project([0,b.wrapLng[1]],d).x/c.y)],this._wrapY=b.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([b.wrapLat[0],0],d).y/c.x),Math.ceil(a.project([b.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._resetView()},_getTiledPixelBounds:function(a,b,c){var d=this._map,f=d.getZoomScale(b,c),g=d.project(a,c).floor(),h=d.getSize().divideBy(2*f);return new e.Bounds(g.subtract(h),g.add(h))},_update:function(a){var d=this._map;if(d){var f=d.getZoom();if(a===c&&(a=d.getCenter()),this._tileZoom!==c){var g=this._getTiledPixelBounds(a,f,this._tileZoom),h=this._pxBoundsToTileRange(g),i=h.getCenter(),j=[];for(var k in this._tiles)this._tiles[k].current=!1;if(Math.abs(f-this._tileZoom)>1)return void this._setView(a,f);for(var l=h.min.y;l<=h.max.y;l++)for(var m=h.min.x;m<=h.max.x;m++){var n=new e.Point(m,l);if(n.z=this._tileZoom,this._isValidTile(n)){var o=this._tiles[this._tileCoordsToKey(n)];o?o.current=!0:j.push(n)}}if(j.sort(function(a,b){return a.distanceTo(i)-b.distanceTo(i)}),0!==j.length){this._loading||(this._loading=!0,this.fire("loading"));var p=b.createDocumentFragment();for(m=0;m<j.length;m++)this._addTile(j[m],p);this._level.el.appendChild(p)}}}},_isValidTile:function(a){var b=this._map.options.crs;if(!b.infinite){var c=this._globalTileRange;if(!b.wrapLng&&(a.x<c.min.x||a.x>c.max.x)||!b.wrapLat&&(a.y<c.min.y||a.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(a);return e.latLngBounds(this.options.bounds).overlaps(d)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToBounds:function(a){var b=this._map,c=this.getTileSize(),d=a.scaleBy(c),f=d.add(c),g=b.wrapLatLng(b.unproject(d,a.z)),h=b.wrapLatLng(b.unproject(f,a.z));return new e.LatLngBounds(g,h)},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var b=a.split(":"),c=new e.Point(+b[0],+b[1]);return c.z=+b[2],c},_removeTile:function(a){var b=this._tiles[a];b&&(e.DomUtil.remove(b.el),delete this._tiles[a],this.fire("tileunload",{tile:b.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){e.DomUtil.addClass(a,"leaflet-tile");var b=this.getTileSize();a.style.width=b.x+"px",a.style.height=b.y+"px",a.onselectstart=e.Util.falseFn,a.onmousemove=e.Util.falseFn,e.Browser.ielt9&&this.options.opacity<1&&e.DomUtil.setOpacity(a,this.options.opacity),e.Browser.android&&!e.Browser.android23&&(a.style.WebkitBackfaceVisibility="hidden")},_addTile:function(a,b){var c=this._getTilePos(a),d=this._tileCoordsToKey(a),f=this.createTile(this._wrapCoords(a),e.bind(this._tileReady,this,a));this._initTile(f),this.createTile.length<2&&e.Util.requestAnimFrame(e.bind(this._tileReady,this,a,null,f)),e.DomUtil.setPosition(f,c),this._tiles[d]={el:f,coords:a,current:!0},b.appendChild(f),this.fire("tileloadstart",{tile:f,coords:a})},_tileReady:function(a,b,c){if(this._map){b&&this.fire("tileerror",{error:b,tile:c,coords:a});var d=this._tileCoordsToKey(a);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(e.DomUtil.setOpacity(c.el,0),e.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=e.Util.requestAnimFrame(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),e.DomUtil.addClass(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:a}),this._noTilesToLoad()&&(this._loading=!1,this.fire("load")))}},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var b=new e.Point(this._wrapX?e.Util.wrapNum(a.x,this._wrapX):a.x,this._wrapY?e.Util.wrapNum(a.y,this._wrapY):a.y);return b.z=a.z,b},_pxBoundsToTileRange:function(a){var b=this.getTileSize();return new e.Bounds(a.min.unscaleBy(b).floor(),a.max.unscaleBy(b).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}}),e.gridLayer=function(a){return new e.GridLayer(a)},e.TileLayer=e.GridLayer.extend({options:{maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,maxNativeZoom:null,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(a,b){this._url=a,b=e.setOptions(this,b),b.detectRetina&&e.Browser.retina&&b.maxZoom>0&&(b.tileSize=Math.floor(b.tileSize/2),b.zoomOffset++,b.minZoom=Math.max(0,b.minZoom),b.maxZoom--),"string"==typeof b.subdomains&&(b.subdomains=b.subdomains.split("")),e.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(a,b){return this._url=a,b||this.redraw(),this},createTile:function(a,c){var d=b.createElement("img");return e.DomEvent.on(d,"load",e.bind(this._tileOnLoad,this,c,d)),e.DomEvent.on(d,"error",e.bind(this._tileOnError,this,c,d)),this.options.crossOrigin&&(d.crossOrigin=""),d.alt="",d.src=this.getTileUrl(a),d},getTileUrl:function(a){return e.Util.template(this._url,e.extend({r:this.options.detectRetina&&e.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(a),x:a.x,y:this.options.tms?this._globalTileRange.max.y-a.y:a.y,z:this._getZoomForUrl()},this.options))},_tileOnLoad:function(a,b){e.Browser.ielt9?setTimeout(e.bind(a,this,null,b),0):a(null,b)},_tileOnError:function(a,b,c){var d=this.options.errorTileUrl;d&&(b.src=d),a(c,b)},getTileSize:function(){var a=this._map,b=e.GridLayer.prototype.getTileSize.call(this),c=this._tileZoom+this.options.zoomOffset,d=this.options.maxNativeZoom;return null!==d&&c>d?b.divideBy(a.getZoomScale(d,c)).round():b},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this.options,b=this._tileZoom;return a.zoomReverse&&(b=a.maxZoom-b),b+=a.zoomOffset,null!==a.maxNativeZoom?Math.min(b,a.maxNativeZoom):b},_getSubdomain:function(a){var b=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[b]},_abortLoading:function(){var a,b;for(a in this._tiles)this._tiles[a].coords.z!==this._tileZoom&&(b=this._tiles[a].el,b.onload=e.Util.falseFn,b.onerror=e.Util.falseFn,b.complete||(b.src=e.Util.emptyImageUrl,e.DomUtil.remove(b)))}}),e.tileLayer=function(a,b){return new e.TileLayer(a,b)},e.TileLayer.WMS=e.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(a,b){this._url=a;var c=e.extend({},this.defaultWmsParams);for(var d in b)d in this.options||(c[d]=b[d]);b=e.setOptions(this,b),c.width=c.height=b.tileSize*(b.detectRetina&&e.Browser.retina?2:1),this.wmsParams=c},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var b=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[b]=this._crs.code,e.TileLayer.prototype.onAdd.call(this,a)},getTileUrl:function(a){var b=this._tileCoordsToBounds(a),c=this._crs.project(b.getNorthWest()),d=this._crs.project(b.getSouthEast()),f=(this._wmsVersion>=1.3&&this._crs===e.CRS.EPSG4326?[d.y,c.x,c.y,d.x]:[c.x,d.y,d.x,c.y]).join(","),g=e.TileLayer.prototype.getTileUrl.call(this,a);return g+e.Util.getParamString(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},setParams:function(a,b){return e.extend(this.wmsParams,a),b||this.redraw(),this}}),e.tileLayer.wms=function(a,b){return new e.TileLayer.WMS(a,b)},e.ImageOverlay=e.Layer.extend({options:{opacity:1,alt:"",interactive:!1},initialize:function(a,b,c){this._url=a,this._bounds=e.latLngBounds(b),e.setOptions(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(e.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){e.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&e.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&e.DomUtil.toBack(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=a,this._map&&this._reset(),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._image=e.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));a.onselectstart=e.Util.falseFn,a.onmousemove=e.Util.falseFn,a.onload=e.bind(this.fire,this,"load"),this.options.crossOrigin&&(a.crossOrigin=""),a.src=this._url,a.alt=this.options.alt},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom),c=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),a.zoom,a.center);e.DomUtil.setTransform(this._image,c,b)},_reset:function(){var a=this._image,b=new e.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=b.getSize();e.DomUtil.setPosition(a,b.min),a.style.width=c.x+"px",a.style.height=c.y+"px"},_updateOpacity:function(){e.DomUtil.setOpacity(this._image,this.options.opacity)}}),e.imageOverlay=function(a,b,c){return new e.ImageOverlay(a,b,c)},e.Icon=e.Class.extend({initialize:function(a){e.setOptions(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,b){var c=this._getIconUrl(a);if(!c){if("icon"===a)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,b&&"IMG"===b.tagName?b:null);return this._setIconStyles(d,a),d},_setIconStyles:function(a,b){var c=this.options,d=e.point(c[b+"Size"]),f=e.point("shadow"===b&&c.shadowAnchor||c.iconAnchor||d&&d.divideBy(2,!0));a.className="leaflet-marker-"+b+" "+(c.className||""),f&&(a.style.marginLeft=-f.x+"px",a.style.marginTop=-f.y+"px"),d&&(a.style.width=d.x+"px",a.style.height=d.y+"px")},_createImg:function(a,c){return c=c||b.createElement("img"),c.src=a,c},_getIconUrl:function(a){return e.Browser.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}}),e.icon=function(a){return new e.Icon(a)},e.Icon.Default=e.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(a){var b=a+"Url";if(this.options[b])return this.options[b];var c=e.Icon.Default.imagePath;if(!c)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return c+"/marker-"+a+(e.Browser.retina&&"icon"===a?"-2x":"")+".png"}}),e.Icon.Default.imagePath=function(){var a,c,d,e,f=b.getElementsByTagName("script"),g=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(a=0,c=f.length;c>a;a++)if(d=f[a].src||"",d.match(g))return e=d.split(g)[0],(e?e+"/":"")+"images"}(),e.Marker=e.Layer.extend({options:{pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"],icon:new e.Icon.Default,interactive:!0,keyboard:!0,zIndexOffset:0,opacity:1,riseOffset:250},initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._initIcon(),this.update()},onRemove:function(){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._removeIcon(),this._removeShadow()},getEvents:function(){var a={zoom:this.update,viewreset:this.update};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},getLatLng:function(){return this._latlng},setLatLng:function(a){var b=this._latlng;return this._latlng=e.latLng(a),this.update(),this.fire("move",{oldLatLng:b,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,b="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=a.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,a.title&&(c.title=a.title),a.alt&&(c.alt=a.alt)),e.DomUtil.addClass(c,b),a.keyboard&&(c.tabIndex="0"),this._icon=c,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var f=a.icon.createShadow(this._shadow),g=!1;f!==this._shadow&&(this._removeShadow(),g=!0),f&&e.DomUtil.addClass(f,b),this._shadow=f,a.opacity<1&&this._updateOpacity(),d&&(this.getPane().appendChild(this._icon),this._initInteraction()),f&&g&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),e.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&e.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(a){e.DomUtil.setPosition(this._icon,a),this._shadow&&e.DomUtil.setPosition(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon.style.zIndex=this._zIndex+a},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(b)},_initInteraction:function(){if(this.options.interactive&&(e.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),e.Handler.MarkerDrag)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new e.Handler.MarkerDrag(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;e.DomUtil.setOpacity(this._icon,a),this._shadow&&e.DomUtil.setOpacity(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),e.marker=function(a,b){return new e.Marker(a,b)},e.DivIcon=e.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(a){var c=a&&"DIV"===a.tagName?a:b.createElement("div"),d=this.options;return c.innerHTML=d.html!==!1?d.html:"",d.bgPos&&(c.style.backgroundPosition=-d.bgPos.x+"px "+-d.bgPos.y+"px"),this._setIconStyles(c,"icon"),c},createShadow:function(){return null}}),e.divIcon=function(a){return new e.DivIcon(a)},e.Map.mergeOptions({closePopupOnClick:!0}),e.Popup=e.Layer.extend({options:{pane:"popupPane",minWidth:50,maxWidth:300,offset:[0,7],autoPan:!0,autoPanPadding:[5,5],closeButton:!0,autoClose:!0,zoomAnimation:!0},initialize:function(a,b){e.setOptions(this,a),this._source=b},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation,this._container||this._initLayout(),a._fadeAnimated&&e.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&e.DomUtil.setOpacity(this._container,1),a.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this},!0)},openOn:function(a){return a.openPopup(this),this},onRemove:function(a){a._fadeAnimated?(e.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(e.bind(e.DomUtil.remove,e.DomUtil,this._container),200)):e.DomUtil.remove(this._container),a.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this},!0)},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=e.latLng(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this._close),this.options.keepInView&&(a.moveend=this._adjustPan),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&e.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&e.DomUtil.toBack(this._container),this},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var a="leaflet-popup",b=this._container=e.DomUtil.create("div",a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"));if(this.options.closeButton){var c=this._closeButton=e.DomUtil.create("a",a+"-close-button",b);c.href="#close",c.innerHTML="&#215;",e.DomEvent.on(c,"click",this._onCloseButtonClick,this)}var d=this._wrapper=e.DomUtil.create("div",a+"-content-wrapper",b);this._contentNode=e.DomUtil.create("div",a+"-content",d),e.DomEvent.disableClickPropagation(d).disableScrollPropagation(this._contentNode).on(d,"contextmenu",e.DomEvent.stopPropagation),this._tipContainer=e.DomUtil.create("div",a+"-tip-container",b),this._tip=e.DomUtil.create("div",a+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var a=this._contentNode,b="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof b)a.innerHTML=b;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(b)}this.fire("contentupdate")}},_updateLayout:function(){var a=this._contentNode,b=a.style;b.width="",b.whiteSpace="nowrap";var c=a.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),b.width=c+1+"px",b.whiteSpace="",b.height="";var d=a.offsetHeight,f=this.options.maxHeight,g="leaflet-popup-scrolled";f&&d>f?(b.height=f+"px",e.DomUtil.addClass(a,g)):e.DomUtil.removeClass(a,g),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),b=e.point(this.options.offset);this._zoomAnimated?e.DomUtil.setPosition(this._container,a):b=b.add(a);var c=this._containerBottom=-b.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+b.x;this._container.style.bottom=c+"px",this._container.style.left=d+"px"}},_animateZoom:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);e.DomUtil.setPosition(this._container,b)},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var a=this._map,b=this._container.offsetHeight,c=this._containerWidth,d=new e.Point(this._containerLeft,-b-this._containerBottom);this._zoomAnimated&&d._add(e.DomUtil.getPosition(this._container));var f=a.layerPointToContainerPoint(d),g=e.point(this.options.autoPanPadding),h=e.point(this.options.autoPanPaddingTopLeft||g),i=e.point(this.options.autoPanPaddingBottomRight||g),j=a.getSize(),k=0,l=0;f.x+c+i.x>j.x&&(k=f.x+c-j.x+i.x),f.x-k-h.x<0&&(k=f.x-h.x),f.y+b+i.y>j.y&&(l=f.y+b-j.y+i.y),f.y-l-h.y<0&&(l=f.y-h.y),(k||l)&&a.fire("autopanstart").panBy([k,l])}},_onCloseButtonClick:function(a){this._close(),e.DomEvent.stop(a)}}),e.popup=function(a,b){return new e.Popup(a,b)},e.Map.include({openPopup:function(a,b,c){return a instanceof e.Popup||(a=new e.Popup(c).setContent(a)),b&&a.setLatLng(b),this.hasLayer(a)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=a,this.addLayer(a))},closePopup:function(a){return a&&a!==this._popup||(a=this._popup,this._popup=null),a&&this.removeLayer(a),this}}),e.Layer.include({bindPopup:function(a,b){return a instanceof e.Popup?(e.setOptions(a,b),this._popup=a,a._source=this):((!this._popup||b)&&(this._popup=new e.Popup(b,this)),this._popup.setContent(a)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this._originalPopupOffset=this._popup.options.offset,this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a,b){if(a instanceof e.Layer||(b=a,a=this),a instanceof e.FeatureGroup)for(var c in this._layers){a=this._layers[c];break}return b||(b=a.getCenter?a.getCenter():a.getLatLng()),this._popup&&this._map&&(this._popup.options.offset=this._popupAnchor(a),this._popup._source=a,this._popup.update(),this._map.openPopup(this._popup,b)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(a){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(a)),this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){var b=a.layer||a.target;return this._popup&&this._map?b instanceof e.Path?void this.openPopup(a.layer||a.target,a.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===b?this.closePopup():this.openPopup(b,a.latlng)):void 0},_popupAnchor:function(a){var b=a._getPopupAnchor?a._getPopupAnchor():[0,0],c=this._originalPopupOffset||e.Popup.prototype.options.offset;return e.point(b).add(c)},_movePopup:function(a){this._popup.setLatLng(a.latlng)}}),e.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}}),e.LayerGroup=e.Layer.extend({initialize:function(a){this._layers={};var b,c;if(a)for(b=0,c=a.length;c>b;b++)this.addLayer(a[b])},addLayer:function(a){var b=this.getLayerId(a);return this._layers[b]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var b=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[b]&&this._map.removeLayer(this._layers[b]),delete this._layers[b],this},hasLayer:function(a){return!!a&&(a in this._layers||this.getLayerId(a)in this._layers)},clearLayers:function(){for(var a in this._layers)this.removeLayer(this._layers[a]);return this},invoke:function(a){var b,c,d=Array.prototype.slice.call(arguments,1);for(b in this._layers)c=this._layers[b],c[a]&&c[a].apply(c,d);return this},onAdd:function(a){for(var b in this._layers)a.addLayer(this._layers[b])},onRemove:function(a){for(var b in this._layers)a.removeLayer(this._layers[b])},eachLayer:function(a,b){for(var c in this._layers)a.call(b,this._layers[c]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];for(var b in this._layers)a.push(this._layers[b]);return a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return e.stamp(a)}}),e.layerGroup=function(a){return new e.LayerGroup(a)},e.FeatureGroup=e.LayerGroup.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),e.LayerGroup.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),e.LayerGroup.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new e.LatLngBounds;for(var b in this._layers){var c=this._layers[b];a.extend(c.getBounds?c.getBounds():c.getLatLng())}return a}}),e.featureGroup=function(a){return new e.FeatureGroup(a)},e.Renderer=e.Layer.extend({options:{padding:.1},initialize:function(a){e.setOptions(this,a),e.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&e.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update()},onRemove:function(){e.DomUtil.remove(this._container)},getEvents:function(){var a={viewreset:this._reset,zoomstart:this._onZoomStart,zoom:this._onZoom,moveend:this._update};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_onZoomStart:function(){this._update()},_updateTransform:function(a,b){var c=this._map.getZoomScale(b,this._zoom),d=e.DomUtil.getPosition(this._container),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,b),h=this._map.project(a,b),i=h.subtract(g),j=f.multiplyBy(-c).add(d).add(f).subtract(i);e.DomUtil.setTransform(this._container,j,c)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom)},_update:function(){var a=this.options.padding,b=this._map.getSize(),c=this._map.containerPointToLayerPoint(b.multiplyBy(-a)).round();this._bounds=new e.Bounds(c,c.add(b.multiplyBy(1+2*a)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),e.Map.include({getRenderer:function(a){var b=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return b||(b=this._renderer=this.options.preferCanvas&&e.canvas()||e.svg()),this.hasLayer(b)||this.addLayer(b),b},_getPaneRenderer:function(a){if("overlayPane"===a||a===c)return!1;var b=this._paneRenderers[a];return b===c&&(b=e.SVG&&e.svg({pane:a})||e.Canvas&&e.canvas({pane:a}),this._paneRenderers[a]=b),b}}),e.Path=e.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{zoomend:this._project,moveend:this._update,viewreset:this._reset}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return e.setOptions(this,a),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(e.Browser.touch?10:0)}}),e.LineUtil={simplify:function(a,b){if(!b||!a.length)return a.slice();var c=b*b;return a=this._reducePoints(a,c),a=this._simplifyDP(a,c)},pointToSegmentDistance:function(a,b,c){return Math.sqrt(this._sqClosestPointOnSegment(a,b,c,!0))},closestPointOnSegment:function(a,b,c){return this._sqClosestPointOnSegment(a,b,c)},_simplifyDP:function(a,b){var d=a.length,e=typeof Uint8Array!=c+""?Uint8Array:Array,f=new e(d);f[0]=f[d-1]=1,this._simplifyDPStep(a,f,b,0,d-1);var g,h=[];for(g=0;d>g;g++)f[g]&&h.push(a[g]);return h},_simplifyDPStep:function(a,b,c,d,e){var f,g,h,i=0;for(g=d+1;e-1>=g;g++)h=this._sqClosestPointOnSegment(a[g],a[d],a[e],!0),h>i&&(f=g,i=h);i>c&&(b[f]=1,this._simplifyDPStep(a,b,c,d,f),this._simplifyDPStep(a,b,c,f,e))},_reducePoints:function(a,b){for(var c=[a[0]],d=1,e=0,f=a.length;f>d;d++)this._sqDist(a[d],a[e])>b&&(c.push(a[d]),
e=d);return f-1>e&&c.push(a[f-1]),c},clipSegment:function(a,b,c,d,e){var f,g,h,i=d?this._lastCode:this._getBitCode(a,c),j=this._getBitCode(b,c);for(this._lastCode=j;;){if(!(i|j))return[a,b];if(i&j)return!1;f=i||j,g=this._getEdgeIntersection(a,b,f,c,e),h=this._getBitCode(g,c),f===i?(a=g,i=h):(b=g,j=h)}},_getEdgeIntersection:function(a,b,c,d,f){var g,h,i=b.x-a.x,j=b.y-a.y,k=d.min,l=d.max;return 8&c?(g=a.x+i*(l.y-a.y)/j,h=l.y):4&c?(g=a.x+i*(k.y-a.y)/j,h=k.y):2&c?(g=l.x,h=a.y+j*(l.x-a.x)/i):1&c&&(g=k.x,h=a.y+j*(k.x-a.x)/i),new e.Point(g,h,f)},_getBitCode:function(a,b){var c=0;return a.x<b.min.x?c|=1:a.x>b.max.x&&(c|=2),a.y<b.min.y?c|=4:a.y>b.max.y&&(c|=8),c},_sqDist:function(a,b){var c=b.x-a.x,d=b.y-a.y;return c*c+d*d},_sqClosestPointOnSegment:function(a,b,c,d){var f,g=b.x,h=b.y,i=c.x-g,j=c.y-h,k=i*i+j*j;return k>0&&(f=((a.x-g)*i+(a.y-h)*j)/k,f>1?(g=c.x,h=c.y):f>0&&(g+=i*f,h+=j*f)),i=a.x-g,j=a.y-h,d?i*i+j*j:new e.Point(g,h)}},e.Polyline=e.Path.extend({options:{smoothFactor:1},initialize:function(a,b){e.setOptions(this,b),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var b,c,d=1/0,f=null,g=e.LineUtil._sqClosestPointOnSegment,h=0,i=this._parts.length;i>h;h++)for(var j=this._parts[h],k=1,l=j.length;l>k;k++){b=j[k-1],c=j[k];var m=g(a,b,c,!0);d>m&&(d=m,f=g(a,b,c))}return f&&(f.distance=Math.sqrt(d)),f},getCenter:function(){var a,b,c,d,e,f,g,h=this._rings[0],i=h.length;if(!i)return null;for(a=0,b=0;i-1>a;a++)b+=h[a].distanceTo(h[a+1])/2;if(0===b)return this._map.layerPointToLatLng(h[0]);for(a=0,d=0;i-1>a;a++)if(e=h[a],f=h[a+1],c=e.distanceTo(f),d+=c,d>b)return g=(d-b)/c,this._map.layerPointToLatLng([f.x-g*(f.x-e.x),f.y-g*(f.y-e.y)])},getBounds:function(){return this._bounds},addLatLng:function(a,b){return b=b||this._defaultShape(),a=e.latLng(a),b.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new e.LatLngBounds,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return e.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var b=[],c=e.Polyline._flat(a),d=0,f=a.length;f>d;d++)c?(b[d]=e.latLng(a[d]),this._bounds.extend(b[d])):b[d]=this._convertLatLngs(a[d]);return b},_project:function(){this._rings=[],this._projectLatlngs(this._latlngs,this._rings);var a=this._clickTolerance(),b=new e.Point(a,-a);this._bounds.isValid()&&(this._pxBounds=new e.Bounds(this._map.latLngToLayerPoint(this._bounds.getSouthWest())._subtract(b),this._map.latLngToLayerPoint(this._bounds.getNorthEast())._add(b)))},_projectLatlngs:function(a,b){var c,d,f=a[0]instanceof e.LatLng,g=a.length;if(f){for(d=[],c=0;g>c;c++)d[c]=this._map.latLngToLayerPoint(a[c]);b.push(d)}else for(c=0;g>c;c++)this._projectLatlngs(a[c],b)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);var b,c,d,f,g,h,i,j=this._parts;for(b=0,d=0,f=this._rings.length;f>b;b++)for(i=this._rings[b],c=0,g=i.length;g-1>c;c++)h=e.LineUtil.clipSegment(i[c],i[c+1],a,c,!0),h&&(j[d]=j[d]||[],j[d].push(h[0]),(h[1]!==i[c+1]||c===g-2)&&(j[d].push(h[1]),d++))}},_simplifyPoints:function(){for(var a=this._parts,b=this.options.smoothFactor,c=0,d=a.length;d>c;c++)a[c]=e.LineUtil.simplify(a[c],b)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),e.polyline=function(a,b){return new e.Polyline(a,b)},e.Polyline._flat=function(a){return!e.Util.isArray(a[0])||"object"!=typeof a[0][0]&&"undefined"!=typeof a[0][0]},e.PolyUtil={},e.PolyUtil.clipPolygon=function(a,b,c){var d,f,g,h,i,j,k,l,m,n=[1,4,2,8],o=e.LineUtil;for(f=0,k=a.length;k>f;f++)a[f]._code=o._getBitCode(a[f],b);for(h=0;4>h;h++){for(l=n[h],d=[],f=0,k=a.length,g=k-1;k>f;g=f++)i=a[f],j=a[g],i._code&l?j._code&l||(m=o._getEdgeIntersection(j,i,l,b,c),m._code=o._getBitCode(m,b),d.push(m)):(j._code&l&&(m=o._getEdgeIntersection(j,i,l,b,c),m._code=o._getBitCode(m,b),d.push(m)),d.push(i));a=d}return a},e.Polygon=e.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){var a,b,c,d,e,f,g,h,i,j=this._rings[0],k=j.length;if(!k)return null;for(f=g=h=0,a=0,b=k-1;k>a;b=a++)c=j[a],d=j[b],e=c.y*d.x-d.y*c.x,g+=(c.x+d.x)*e,h+=(c.y+d.y)*e,f+=3*e;return i=0===f?j[0]:[g/f,h/f],this._map.layerPointToLatLng(i)},_convertLatLngs:function(a){var b=e.Polyline.prototype._convertLatLngs.call(this,a),c=b.length;return c>=2&&b[0]instanceof e.LatLng&&b[0].equals(b[c-1])&&b.pop(),b},_setLatLngs:function(a){e.Polyline.prototype._setLatLngs.call(this,a),e.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return e.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,b=this.options.weight,c=new e.Point(b,b);if(a=new e.Bounds(a.min.subtract(c),a.max.add(c)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(a)){if(this.options.noClip)return void(this._parts=this._rings);for(var d,f=0,g=this._rings.length;g>f;f++)d=e.PolyUtil.clipPolygon(this._rings[f],a,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),e.polygon=function(a,b){return new e.Polygon(a,b)},e.Rectangle=e.Polygon.extend({initialize:function(a,b){e.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(a),b)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=e.latLngBounds(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}}),e.rectangle=function(a,b){return new e.Rectangle(a,b)},e.CircleMarker=e.Path.extend({options:{fill:!0,radius:10},initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a),this._radius=this.options.radius},setLatLng:function(a){return this._latlng=e.latLng(a),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var b=a&&a.radius||this._radius;return e.Path.prototype.setStyle.call(this,a),this.setRadius(b),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,b=this._radiusY||a,c=this._clickTolerance(),d=[a+c,b+c];this._pxBounds=new e.Bounds(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),e.circleMarker=function(a,b){return new e.CircleMarker(a,b)},e.Circle=e.CircleMarker.extend({initialize:function(a,b){e.setOptions(this,b),this._latlng=e.latLng(a),this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new e.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:e.Path.prototype.setStyle,_project:function(){var a=this._latlng.lng,b=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===e.CRS.Earth.distance){var f=Math.PI/180,g=this._mRadius/e.CRS.Earth.R/f,h=c.project([b+g,a]),i=c.project([b-g,a]),j=h.add(i).divideBy(2),k=c.unproject(j).lat,l=Math.acos((Math.cos(g*f)-Math.sin(b*f)*Math.sin(k*f))/(Math.cos(b*f)*Math.cos(k*f)))/f;this._point=j.subtract(c.getPixelOrigin()),this._radius=isNaN(l)?0:Math.max(Math.round(j.x-c.project([k,a-l]).x),1),this._radiusY=Math.max(Math.round(j.y-h.y),1)}else{var m=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(m).x}this._updateBounds()}}),e.circle=function(a,b,c){return"number"==typeof b&&(b=e.extend({},c,{radius:b})),new e.Circle(a,b)},e.SVG=e.Renderer.extend({_initContainer:function(){this._container=e.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=e.SVG.create("g"),this._container.appendChild(this._rootGroup)},_update:function(){if(!this._map._animatingZoom||!this._bounds){e.Renderer.prototype._update.call(this);var a=this._bounds,b=a.getSize(),c=this._container;this._svgSize&&this._svgSize.equals(b)||(this._svgSize=b,c.setAttribute("width",b.x),c.setAttribute("height",b.y)),e.DomUtil.setPosition(c,a.min),c.setAttribute("viewBox",[a.min.x,a.min.y,b.x,b.y].join(" "))}},_initPath:function(a){var b=a._path=e.SVG.create("path");a.options.className&&e.DomUtil.addClass(b,a.options.className),a.options.interactive&&e.DomUtil.addClass(b,"leaflet-interactive"),this._updateStyle(a)},_addPath:function(a){this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){e.DomUtil.remove(a._path),a.removeInteractiveTarget(a._path)},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var b=a._path,c=a.options;b&&(c.stroke?(b.setAttribute("stroke",c.color),b.setAttribute("stroke-opacity",c.opacity),b.setAttribute("stroke-width",c.weight),b.setAttribute("stroke-linecap",c.lineCap),b.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?b.setAttribute("stroke-dasharray",c.dashArray):b.removeAttribute("stroke-dasharray"),c.dashOffset?b.setAttribute("stroke-dashoffset",c.dashOffset):b.removeAttribute("stroke-dashoffset")):b.setAttribute("stroke","none"),c.fill?(b.setAttribute("fill",c.fillColor||c.color),b.setAttribute("fill-opacity",c.fillOpacity),b.setAttribute("fill-rule",c.fillRule||"evenodd")):b.setAttribute("fill","none"),b.setAttribute("pointer-events",c.pointerEvents||(c.interactive?"visiblePainted":"none")))},_updatePoly:function(a,b){this._setPath(a,e.SVG.pointsToPath(a._parts,b))},_updateCircle:function(a){var b=a._point,c=a._radius,d=a._radiusY||c,e="a"+c+","+d+" 0 1,0 ",f=a._empty()?"M0 0":"M"+(b.x-c)+","+b.y+e+2*c+",0 "+e+2*-c+",0 ";this._setPath(a,f)},_setPath:function(a,b){a._path.setAttribute("d",b)},_bringToFront:function(a){e.DomUtil.toFront(a._path)},_bringToBack:function(a){e.DomUtil.toBack(a._path)}}),e.extend(e.SVG,{create:function(a){return b.createElementNS("http://www.w3.org/2000/svg",a)},pointsToPath:function(a,b){var c,d,f,g,h,i,j="";for(c=0,f=a.length;f>c;c++){for(h=a[c],d=0,g=h.length;g>d;d++)i=h[d],j+=(d?"L":"M")+i.x+" "+i.y;j+=b?e.Browser.svg?"z":"x":""}return j||"M0 0"}}),e.Browser.svg=!(!b.createElementNS||!e.SVG.create("svg").createSVGRect),e.svg=function(a){return e.Browser.svg||e.Browser.vml?new e.SVG(a):null},e.Browser.vml=!e.Browser.svg&&function(){try{var a=b.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch(d){return!1}}(),e.SVG.include(e.Browser.vml?{_initContainer:function(){this._container=e.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||e.Renderer.prototype._update.call(this)},_initPath:function(a){var b=a._container=e.SVG.create("shape");e.DomUtil.addClass(b,"leaflet-vml-shape "+(this.options.className||"")),b.coordsize="1 1",a._path=e.SVG.create("path"),b.appendChild(a._path),this._updateStyle(a)},_addPath:function(a){var b=a._container;this._container.appendChild(b),a.options.interactive&&a.addInteractiveTarget(b)},_removePath:function(a){var b=a._container;e.DomUtil.remove(b),a.removeInteractiveTarget(b)},_updateStyle:function(a){var b=a._stroke,c=a._fill,d=a.options,f=a._container;f.stroked=!!d.stroke,f.filled=!!d.fill,d.stroke?(b||(b=a._stroke=e.SVG.create("stroke")),f.appendChild(b),b.weight=d.weight+"px",b.color=d.color,b.opacity=d.opacity,d.dashArray?b.dashStyle=e.Util.isArray(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):b.dashStyle="",b.endcap=d.lineCap.replace("butt","flat"),b.joinstyle=d.lineJoin):b&&(f.removeChild(b),a._stroke=null),d.fill?(c||(c=a._fill=e.SVG.create("fill")),f.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(f.removeChild(c),a._fill=null)},_updateCircle:function(a){var b=a._point.round(),c=Math.round(a._radius),d=Math.round(a._radiusY||c);this._setPath(a,a._empty()?"M0 0":"AL "+b.x+","+b.y+" "+c+","+d+" 0,23592600")},_setPath:function(a,b){a._path.v=b},_bringToFront:function(a){e.DomUtil.toFront(a._container)},_bringToBack:function(a){e.DomUtil.toBack(a._container)}}:{}),e.Browser.vml&&(e.SVG.create=function(){try{return b.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return b.createElement("<lvml:"+a+' class="lvml">')}}catch(a){return function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),e.Canvas=e.Renderer.extend({onAdd:function(){e.Renderer.prototype.onAdd.call(this),this._layers=this._layers||{},this._draw()},_initContainer:function(){var a=this._container=b.createElement("canvas");e.DomEvent.on(a,"mousemove",e.Util.throttle(this._onMouseMove,32,this),this).on(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(a,"mouseout",this._handleMouseOut,this),this._ctx=a.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},e.Renderer.prototype._update.call(this);var a=this._bounds,b=this._container,c=a.getSize(),d=e.Browser.retina?2:1;e.DomUtil.setPosition(b,a.min),b.width=d*c.x,b.height=d*c.y,b.style.width=c.x+"px",b.style.height=c.y+"px",e.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y)}},_initPath:function(a){this._layers[e.stamp(a)]=a},_addPath:e.Util.falseFn,_removePath:function(a){a._removed=!0,this._requestRedraw(a)},_updatePath:function(a){this._redrawBounds=a._pxBounds,this._draw(!0),a._project(),a._update(),this._draw(),this._redrawBounds=null},_updateStyle:function(a){this._requestRedraw(a)},_requestRedraw:function(a){if(this._map){var b=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new e.Bounds,this._redrawBounds.extend(a._pxBounds.min.subtract([b,b])),this._redrawBounds.extend(a._pxBounds.max.add([b,b])),this._redrawRequest=this._redrawRequest||e.Util.requestAnimFrame(this._redraw,this)}},_redraw:function(){this._redrawRequest=null,this._draw(!0),this._draw(),this._redrawBounds=null},_draw:function(a){this._clear=a;var b,c=this._redrawBounds;this._ctx.save(),c&&(this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y),this._ctx.clip());for(var d in this._layers)b=this._layers[d],(!c||b._pxBounds.intersects(c))&&b._updatePath(),a&&b._removed&&(delete b._removed,delete this._layers[d]);this._ctx.restore()},_updatePoly:function(a,b){var c,d,e,f,g=a._parts,h=g.length,i=this._ctx;if(h){for(this._drawnLayers[a._leaflet_id]=a,i.beginPath(),c=0;h>c;c++){for(d=0,e=g[c].length;e>d;d++)f=g[c][d],i[d?"lineTo":"moveTo"](f.x,f.y);b&&i.closePath()}this._fillStroke(i,a)}},_updateCircle:function(a){if(!a._empty()){var b=a._point,c=this._ctx,d=a._radius,e=(a._radiusY||d)/d;1!==e&&(c.save(),c.scale(1,e)),c.beginPath(),c.arc(b.x,b.y/e,d,0,2*Math.PI,!1),1!==e&&c.restore(),this._fillStroke(c,a)}},_fillStroke:function(a,b){var c=this._clear,d=b.options;a.globalCompositeOperation=c?"destination-out":"source-over",d.fill&&(a.globalAlpha=c?1:d.fillOpacity,a.fillStyle=d.fillColor||d.color,a.fill(d.fillRule||"evenodd")),d.stroke&&0!==d.weight&&(a.globalAlpha=c?1:d.opacity,b._prevWeight=a.lineWidth=c?b._prevWeight+1:d.weight,a.strokeStyle=d.color,a.lineCap=d.lineCap,a.lineJoin=d.lineJoin,a.stroke())},_onClick:function(a){var b=this._map.mouseEventToLayerPoint(a),c=[];for(var d in this._layers)this._layers[d]._containsPoint(b)&&(e.DomEvent._fakeStop(a),c.push(this._layers[d]));c.length&&this._fireEvent(c,a)},_onMouseMove:function(a){if(this._map&&!this._map.dragging._draggable._moving&&!this._map._animatingZoom){var b=this._map.mouseEventToLayerPoint(a);this._handleMouseOut(a,b),this._handleMouseHover(a,b)}},_handleMouseOut:function(a,b){var c=this._hoveredLayer;!c||"mouseout"!==a.type&&c._containsPoint(b)||(e.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(a,b){var c,d;if(!this._hoveredLayer)for(c in this._drawnLayers)if(d=this._drawnLayers[c],d.options.interactive&&d._containsPoint(b)){e.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([d],a,"mouseover"),this._hoveredLayer=d;break}this._hoveredLayer&&this._fireEvent([this._hoveredLayer],a)},_fireEvent:function(a,b,c){this._map._fireDOMEvent(b,c||b.type,a)},_bringToFront:e.Util.falseFn,_bringToBack:e.Util.falseFn}),e.Browser.canvas=function(){return!!b.createElement("canvas").getContext}(),e.canvas=function(a){return e.Browser.canvas?new e.Canvas(a):null},e.Polyline.prototype._containsPoint=function(a,b){var c,d,f,g,h,i,j=this._clickTolerance();if(!this._pxBounds.contains(a))return!1;for(c=0,g=this._parts.length;g>c;c++)for(i=this._parts[c],d=0,h=i.length,f=h-1;h>d;f=d++)if((b||0!==d)&&e.LineUtil.pointToSegmentDistance(a,i[f],i[d])<=j)return!0;return!1},e.Polygon.prototype._containsPoint=function(a){var b,c,d,f,g,h,i,j,k=!1;if(!this._pxBounds.contains(a))return!1;for(f=0,i=this._parts.length;i>f;f++)for(b=this._parts[f],g=0,j=b.length,h=j-1;j>g;h=g++)c=b[g],d=b[h],c.y>a.y!=d.y>a.y&&a.x<(d.x-c.x)*(a.y-c.y)/(d.y-c.y)+c.x&&(k=!k);return k||e.Polyline.prototype._containsPoint.call(this,a,!0)},e.CircleMarker.prototype._containsPoint=function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()},e.GeoJSON=e.FeatureGroup.extend({initialize:function(a,b){e.setOptions(this,b),this._layers={},a&&this.addData(a)},addData:function(a){var b,c,d,f=e.Util.isArray(a)?a:a.features;if(f){for(b=0,c=f.length;c>b;b++)d=f[b],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var g=this.options;if(g.filter&&!g.filter(a))return this;var h=e.GeoJSON.geometryToLayer(a,g);return h?(h.feature=e.GeoJSON.asFeature(a),h.defaultOptions=h.options,this.resetStyle(h),g.onEachFeature&&g.onEachFeature(a,h),this.addLayer(h)):this},resetStyle:function(a){return a.options=a.defaultOptions,this._setLayerStyle(a,this.options.style),this},setStyle:function(a){return this.eachLayer(function(b){this._setLayerStyle(b,a)},this)},_setLayerStyle:function(a,b){"function"==typeof b&&(b=b(a.feature)),a.setStyle&&a.setStyle(b)}}),e.extend(e.GeoJSON,{geometryToLayer:function(a,b){var c,d,f,g,h="Feature"===a.type?a.geometry:a,i=h?h.coordinates:null,j=[],k=b&&b.pointToLayer,l=b&&b.coordsToLatLng||this.coordsToLatLng;if(!i&&!h)return null;switch(h.type){case"Point":return c=l(i),k?k(a,c):new e.Marker(c);case"MultiPoint":for(f=0,g=i.length;g>f;f++)c=l(i[f]),j.push(k?k(a,c):new e.Marker(c));return new e.FeatureGroup(j);case"LineString":case"MultiLineString":return d=this.coordsToLatLngs(i,"LineString"===h.type?0:1,l),new e.Polyline(d,b);case"Polygon":case"MultiPolygon":return d=this.coordsToLatLngs(i,"Polygon"===h.type?1:2,l),new e.Polygon(d,b);case"GeometryCollection":for(f=0,g=h.geometries.length;g>f;f++){var m=this.geometryToLayer({geometry:h.geometries[f],type:"Feature",properties:a.properties},b);m&&j.push(m)}return new e.FeatureGroup(j);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(a){return new e.LatLng(a[1],a[0],a[2])},coordsToLatLngs:function(a,b,c){for(var d,e=[],f=0,g=a.length;g>f;f++)d=b?this.coordsToLatLngs(a[f],b-1,c):(c||this.coordsToLatLng)(a[f]),e.push(d);return e},latLngToCoords:function(a){return a.alt!==c?[a.lng,a.lat,a.alt]:[a.lng,a.lat]},latLngsToCoords:function(a,b,c){for(var d=[],f=0,g=a.length;g>f;f++)d.push(b?e.GeoJSON.latLngsToCoords(a[f],b-1,c):e.GeoJSON.latLngToCoords(a[f]));return!b&&c&&d.push(d[0]),d},getFeature:function(a,b){return a.feature?e.extend({},a.feature,{geometry:b}):e.GeoJSON.asFeature(b)},asFeature:function(a){return"Feature"===a.type?a:{type:"Feature",properties:{},geometry:a}}});var g={toGeoJSON:function(){return e.GeoJSON.getFeature(this,{type:"Point",coordinates:e.GeoJSON.latLngToCoords(this.getLatLng())})}};e.Marker.include(g),e.Circle.include(g),e.CircleMarker.include(g),e.Polyline.prototype.toGeoJSON=function(){var a=!e.Polyline._flat(this._latlngs),b=e.GeoJSON.latLngsToCoords(this._latlngs,a?1:0);return e.GeoJSON.getFeature(this,{type:(a?"Multi":"")+"LineString",coordinates:b})},e.Polygon.prototype.toGeoJSON=function(){var a=!e.Polyline._flat(this._latlngs),b=a&&!e.Polyline._flat(this._latlngs[0]),c=e.GeoJSON.latLngsToCoords(this._latlngs,b?2:a?1:0,!0);return a||(c=[c]),e.GeoJSON.getFeature(this,{type:(b?"Multi":"")+"Polygon",coordinates:c})},e.LayerGroup.include({toMultiPoint:function(){var a=[];return this.eachLayer(function(b){a.push(b.toGeoJSON().geometry.coordinates)}),e.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===a)return this.toMultiPoint();var b="GeometryCollection"===a,c=[];return this.eachLayer(function(a){if(a.toGeoJSON){var d=a.toGeoJSON();c.push(b?d.geometry:e.GeoJSON.asFeature(d))}}),b?e.GeoJSON.getFeature(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}}),e.geoJson=function(a,b){return new e.GeoJSON(a,b)};var h="_leaflet_events";e.DomEvent={on:function(a,b,c,d){if("object"==typeof b)for(var f in b)this._on(a,f,b[f],c);else{b=e.Util.splitWords(b);for(var g=0,h=b.length;h>g;g++)this._on(a,b[g],c,d)}return this},off:function(a,b,c,d){if("object"==typeof b)for(var f in b)this._off(a,f,b[f],c);else{b=e.Util.splitWords(b);for(var g=0,h=b.length;h>g;g++)this._off(a,b[g],c,d)}return this},_on:function(b,c,d,f){var g=c+e.stamp(d)+(f?"_"+e.stamp(f):"");if(b[h]&&b[h][g])return this;var i=function(c){return d.call(f||b,c||a.event)},j=i;return e.Browser.pointer&&0===c.indexOf("touch")?this.addPointerListener(b,c,i,g):e.Browser.touch&&"dblclick"===c&&this.addDoubleTapListener?this.addDoubleTapListener(b,i,g):"addEventListener"in b?"mousewheel"===c?(b.addEventListener("DOMMouseScroll",i,!1),b.addEventListener(c,i,!1)):"mouseenter"===c||"mouseleave"===c?(i=function(c){c=c||a.event,e.DomEvent._isExternalTarget(b,c)&&j(c)},b.addEventListener("mouseenter"===c?"mouseover":"mouseout",i,!1)):("click"===c&&e.Browser.android&&(i=function(a){return e.DomEvent._filterClick(a,j)}),b.addEventListener(c,i,!1)):"attachEvent"in b&&b.attachEvent("on"+c,i),b[h]=b[h]||{},b[h][g]=i,this},_off:function(a,b,c,d){var f=b+e.stamp(c)+(d?"_"+e.stamp(d):""),g=a[h]&&a[h][f];return g?(e.Browser.pointer&&0===b.indexOf("touch")?this.removePointerListener(a,b,f):e.Browser.touch&&"dblclick"===b&&this.removeDoubleTapListener?this.removeDoubleTapListener(a,f):"removeEventListener"in a?"mousewheel"===b?(a.removeEventListener("DOMMouseScroll",g,!1),a.removeEventListener(b,g,!1)):a.removeEventListener("mouseenter"===b?"mouseover":"mouseleave"===b?"mouseout":b,g,!1):"detachEvent"in a&&a.detachEvent("on"+b,g),a[h][f]=null,this):this},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,e.DomEvent._skipped(a),this},disableScrollPropagation:function(a){return e.DomEvent.on(a,"mousewheel MozMousePixelScroll",e.DomEvent.stopPropagation)},disableClickPropagation:function(a){var b=e.DomEvent.stopPropagation;return e.DomEvent.on(a,e.Draggable.START.join(" "),b),e.DomEvent.on(a,{click:e.DomEvent._fakeStop,dblclick:b})},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},stop:function(a){return e.DomEvent.preventDefault(a).stopPropagation(a)},getMousePosition:function(a,b){if(!b)return new e.Point(a.clientX,a.clientY);var c=b.getBoundingClientRect();return new e.Point(a.clientX-c.left-b.clientLeft,a.clientY-c.top-b.clientTop)},getWheelDelta:function(a){var b=0;return a.wheelDelta&&(b=a.wheelDelta/120),a.detail&&(b=-a.detail/3),b},_skipEvents:{},_fakeStop:function(a){e.DomEvent._skipEvents[a.type]=!0},_skipped:function(a){var b=this._skipEvents[a.type];return this._skipEvents[a.type]=!1,b},_isExternalTarget:function(a,b){var c=b.relatedTarget;if(!c)return!0;try{for(;c&&c!==a;)c=c.parentNode}catch(d){return!1}return c!==a},_filterClick:function(a,b){var c=a.timeStamp||a.originalEvent.timeStamp,d=e.DomEvent._lastClick&&c-e.DomEvent._lastClick;return d&&d>100&&500>d||a.target._simulatedClick&&!a._simulated?void e.DomEvent.stop(a):(e.DomEvent._lastClick=c,void b(a))}},e.DomEvent.addListener=e.DomEvent.on,e.DomEvent.removeListener=e.DomEvent.off,e.Draggable=e.Evented.extend({statics:{START:e.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(a,b,c){this._element=a,this._dragStartTarget=b||a,this._preventOutline=c},enable:function(){this._enabled||(e.DomEvent.on(this._dragStartTarget,e.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(e.DomEvent.off(this._dragStartTarget,e.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._moved=!1,!e.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(e.Draggable._dragging||a.shiftKey||1!==a.which&&1!==a.button&&!a.touches)&&this._enabled&&(e.Draggable._dragging=!0,this._preventOutline&&e.DomUtil.preventOutline(this._element),e.DomUtil.disableImageDrag(),e.DomUtil.disableTextSelection(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a;this._startPoint=new e.Point(c.clientX,c.clientY),this._startPos=this._newPos=e.DomUtil.getPosition(this._element),e.DomEvent.on(b,e.Draggable.MOVE[a.type],this._onMove,this).on(b,e.Draggable.END[a.type],this._onUp,this)}},_onMove:function(a){if(a.touches&&a.touches.length>1)return void(this._moved=!0);var c=a.touches&&1===a.touches.length?a.touches[0]:a,d=new e.Point(c.clientX,c.clientY),f=d.subtract(this._startPoint);(f.x||f.y)&&(e.Browser.touch&&Math.abs(f.x)+Math.abs(f.y)<3||(e.DomEvent.preventDefault(a),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=e.DomUtil.getPosition(this._element).subtract(f),e.DomUtil.addClass(b.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,e.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,e.Util.cancelAnimFrame(this._animRequest),this._lastEvent=a,this._animRequest=e.Util.requestAnimFrame(this._updatePosition,this,!0)))},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),e.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){e.DomUtil.removeClass(b.body,"leaflet-dragging"),this._lastTarget&&(e.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var a in e.Draggable.MOVE)e.DomEvent.off(b,e.Draggable.MOVE[a],this._onMove,this).off(b,e.Draggable.END[a],this._onUp,this);e.DomUtil.enableImageDrag(),e.DomUtil.enableTextSelection(),this._moved&&this._moving&&(e.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,e.Draggable._dragging=!1}}),e.Handler=e.Class.extend({initialize:function(a){this._map=a},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),e.Map.mergeOptions({dragging:!0,inertia:!e.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1}),e.Map.Drag=e.Handler.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new e.Draggable(a._mapPane,a._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}e.DomUtil.addClass(this._map._container,"leaflet-grab"),this._draggable.enable()},removeHooks:function(){e.DomUtil.removeClass(this._map._container,"leaflet-grab"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDown:function(){this._map.stop()},_onDragStart:function(){var a=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var b=e.latLngBounds(this._map.options.maxBounds);this._offsetLimit=e.bounds(this._map.latLngToContainerPoint(b.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(b.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var b=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(b),b-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",a).fire("drag",a)},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),b=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=b.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,b){return a-(a-b)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var a=this._draggable._newPos.subtract(this._draggable._startPos),b=this._offsetLimit;a.x<b.min.x&&(a.x=this._viscousLimit(a.x,b.min.x)),a.y<b.min.y&&(a.y=this._viscousLimit(a.y,b.min.y)),a.x>b.max.x&&(a.x=this._viscousLimit(a.x,b.max.x)),a.y>b.max.y&&(a.y=this._viscousLimit(a.y,b.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,b=Math.round(a/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,e=(d-b+c)%a+b-c,f=(d+b+c)%a-b-c,g=Math.abs(e+c)<Math.abs(f+c)?e:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=g},_onDragEnd:function(a){var b=this._map,c=b.options,d=!c.inertia||this._times.length<2;if(b.fire("dragend",a),d)b.fire("moveend");else{var f=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,h=c.easeLinearity,i=f.multiplyBy(h/g),j=i.distanceTo([0,0]),k=Math.min(c.inertiaMaxSpeed,j),l=i.multiplyBy(k/j),m=k/(c.inertiaDeceleration*h),n=l.multiplyBy(-m/2).round();n.x||n.y?(n=b._limitOffset(n,b.options.maxBounds),e.Util.requestAnimFrame(function(){b.panBy(n,{duration:m,easeLinearity:h,noMoveStart:!0,animate:!0})})):b.fire("moveend")}}}),e.Map.addInitHook("addHandler","dragging",e.Map.Drag),e.Map.mergeOptions({doubleClickZoom:!0}),e.Map.DoubleClickZoom=e.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var b=this._map,c=b.getZoom(),d=a.originalEvent.shiftKey?Math.ceil(c)-1:Math.floor(c)+1;"center"===b.options.doubleClickZoom?b.setZoom(d):b.setZoomAround(a.containerPoint,d)}}),e.Map.addInitHook("addHandler","doubleClickZoom",e.Map.DoubleClickZoom),e.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40}),e.Map.ScrollWheelZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:e.DomEvent.preventDefault},this),this._delta=0},removeHooks:function(){e.DomEvent.off(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:e.DomEvent.preventDefault},this)},_onWheelScroll:function(a){
var b=e.DomEvent.getWheelDelta(a),c=this._map.options.wheelDebounceTime;this._delta+=b,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e.bind(this._performZoom,this),d),e.DomEvent.stop(a)},_performZoom:function(){var a=this._map,b=this._delta,c=a.getZoom();a.stop(),b=b>0?Math.ceil(b):Math.floor(b),b=Math.max(Math.min(b,4),-4),b=a._limitZoom(c+b)-c,this._delta=0,this._startTime=null,b&&("center"===a.options.scrollWheelZoom?a.setZoom(c+b):a.setZoomAround(this._lastMousePos,c+b))}}),e.Map.addInitHook("addHandler","scrollWheelZoom",e.Map.ScrollWheelZoom),e.extend(e.DomEvent,{_touchstart:e.Browser.msPointer?"MSPointerDown":e.Browser.pointer?"pointerdown":"touchstart",_touchend:e.Browser.msPointer?"MSPointerUp":e.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(a,b,c){function d(a){var b;if(b=e.Browser.pointer?e.DomEvent._pointersCount:a.touches.length,!(b>1)){var c=Date.now(),d=c-(g||c);h=a.touches?a.touches[0]:a,i=d>0&&j>=d,g=c}}function f(){if(i&&!h.cancelBubble){if(e.Browser.pointer){var a,c,d={};for(c in h)a=h[c],d[c]=a&&a.bind?a.bind(h):a;h=d}h.type="dblclick",b(h),g=null}}var g,h,i=!1,j=250,k="_leaflet_",l=this._touchstart,m=this._touchend;return a[k+l+c]=d,a[k+m+c]=f,a.addEventListener(l,d,!1),a.addEventListener(m,f,!1),this},removeDoubleTapListener:function(a,b){var c="_leaflet_",d=a[c+this._touchend+b];return a.removeEventListener(this._touchstart,a[c+this._touchstart+b],!1),a.removeEventListener(this._touchend,d,!1),this}}),e.extend(e.DomEvent,{POINTER_DOWN:e.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:e.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:e.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:e.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:{},_pointersCount:0,addPointerListener:function(a,b,c,d){return"touchstart"===b?this._addPointerStart(a,c,d):"touchmove"===b?this._addPointerMove(a,c,d):"touchend"===b&&this._addPointerEnd(a,c,d),this},removePointerListener:function(a,b,c){var d=a["_leaflet_"+b+c];return"touchstart"===b?a.removeEventListener(this.POINTER_DOWN,d,!1):"touchmove"===b?a.removeEventListener(this.POINTER_MOVE,d,!1):"touchend"===b&&(a.removeEventListener(this.POINTER_UP,d,!1),a.removeEventListener(this.POINTER_CANCEL,d,!1)),this},_addPointerStart:function(a,c,d){var f=e.bind(function(a){"mouse"!==a.pointerType&&a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&e.DomEvent.preventDefault(a),this._handlePointer(a,c)},this);if(a["_leaflet_touchstart"+d]=f,a.addEventListener(this.POINTER_DOWN,f,!1),!this._pointerDocListener){var g=e.bind(this._globalPointerUp,this);b.documentElement.addEventListener(this.POINTER_DOWN,e.bind(this._globalPointerDown,this),!0),b.documentElement.addEventListener(this.POINTER_MOVE,e.bind(this._globalPointerMove,this),!0),b.documentElement.addEventListener(this.POINTER_UP,g,!0),b.documentElement.addEventListener(this.POINTER_CANCEL,g,!0),this._pointerDocListener=!0}},_globalPointerDown:function(a){this._pointers[a.pointerId]=a,this._pointersCount++},_globalPointerMove:function(a){this._pointers[a.pointerId]&&(this._pointers[a.pointerId]=a)},_globalPointerUp:function(a){delete this._pointers[a.pointerId],this._pointersCount--},_handlePointer:function(a,b){a.touches=[];for(var c in this._pointers)a.touches.push(this._pointers[c]);a.changedTouches=[a],b(a)},_addPointerMove:function(a,b,c){var d=e.bind(function(a){(a.pointerType!==a.MSPOINTER_TYPE_MOUSE&&"mouse"!==a.pointerType||0!==a.buttons)&&this._handlePointer(a,b)},this);a["_leaflet_touchmove"+c]=d,a.addEventListener(this.POINTER_MOVE,d,!1)},_addPointerEnd:function(a,b,c){var d=e.bind(function(a){this._handlePointer(a,b)},this);a["_leaflet_touchend"+c]=d,a.addEventListener(this.POINTER_UP,d,!1),a.addEventListener(this.POINTER_CANCEL,d,!1)}}),e.Map.mergeOptions({touchZoom:e.Browser.touch&&!e.Browser.android23,bounceAtZoomLimits:!0}),e.Map.TouchZoom=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(a.touches&&2===a.touches.length&&!c._animatingZoom&&!this._zooming){var d=c.mouseEventToContainerPoint(a.touches[0]),f=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),"center"!==c.options.touchZoom&&(this._pinchStartLatLng=c.containerPointToLatLng(d.add(f)._divideBy(2))),this._startDist=d.distanceTo(f),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c.stop(),e.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this),e.DomEvent.preventDefault(a)}},_onTouchMove:function(a){if(a.touches&&2===a.touches.length&&this._zooming){var b=this._map,c=b.mouseEventToContainerPoint(a.touches[0]),d=b.mouseEventToContainerPoint(a.touches[1]),f=c.distanceTo(d)/this._startDist;if(this._zoom=b.getScaleZoom(f,this._startZoom),"center"===b.options.touchZoom){if(this._center=this._startLatLng,1===f)return}else{var g=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(1===f&&0===g.x&&0===g.y)return;this._center=b.unproject(b.project(this._pinchStartLatLng).subtract(g))}if(b.options.bounceAtZoomLimits||!(this._zoom<=b.getMinZoom()&&1>f||this._zoom>=b.getMaxZoom()&&f>1)){this._moved||(b._moveStart(!0),this._moved=!0),e.Util.cancelAnimFrame(this._animRequest);var h=e.bind(b._move,b,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=e.Util.requestAnimFrame(h,this,!0),e.DomEvent.preventDefault(a)}}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,e.Util.cancelAnimFrame(this._animRequest),e.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var a=this._zoom;a=this._map._limitZoom(a-this._startZoom>0?Math.ceil(a):Math.floor(a)),this._map._animateZoom(this._center,a,!0,!0)}}),e.Map.addInitHook("addHandler","touchZoom",e.Map.TouchZoom),e.Map.mergeOptions({tap:!0,tapTolerance:15}),e.Map.Tap=e.Handler.extend({addHooks:function(){e.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){e.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(a.touches){if(e.DomEvent.preventDefault(a),this._fireClick=!0,a.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var c=a.touches[0],d=c.target;this._startPos=this._newPos=new e.Point(c.clientX,c.clientY),d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.addClass(d,"leaflet-active"),this._holdTimeout=setTimeout(e.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",c))},this),1e3),this._simulateEvent("mousedown",c),e.DomEvent.on(b,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(a){if(clearTimeout(this._holdTimeout),e.DomEvent.off(b,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&a&&a.changedTouches){var c=a.changedTouches[0],d=c.target;d&&d.tagName&&"a"===d.tagName.toLowerCase()&&e.DomUtil.removeClass(d,"leaflet-active"),this._simulateEvent("mouseup",c),this._isTapValid()&&this._simulateEvent("click",c)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(a){var b=a.touches[0];this._newPos=new e.Point(b.clientX,b.clientY),this._simulateEvent("mousemove",b)},_simulateEvent:function(c,d){var e=b.createEvent("MouseEvents");e._simulated=!0,d.target._simulatedClick=!0,e.initMouseEvent(c,!0,!0,a,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(e)}}),e.Browser.touch&&!e.Browser.pointer&&e.Map.addInitHook("addHandler","tap",e.Map.Tap),e.Map.mergeOptions({boxZoom:!0}),e.Map.BoxZoom=e.Handler.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane},addHooks:function(){e.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){e.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(a){return!a.shiftKey||1!==a.which&&1!==a.button?!1:(this._resetState(),e.DomUtil.disableTextSelection(),e.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(a),void e.DomEvent.on(b,{contextmenu:e.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=e.DomUtil.create("div","leaflet-zoom-box",this._container),e.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var b=new e.Bounds(this._point,this._startPoint),c=b.getSize();e.DomUtil.setPosition(this._box,b.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(e.DomUtil.remove(this._box),e.DomUtil.removeClass(this._container,"leaflet-crosshair")),e.DomUtil.enableTextSelection(),e.DomUtil.enableImageDrag(),e.DomEvent.off(b,{contextmenu:e.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if((1===a.which||1===a.button)&&(this._finish(),this._moved)){setTimeout(e.bind(this._resetState,this),0);var b=new e.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(b).fire("boxzoomend",{boxZoomBounds:b})}},_onKeyDown:function(a){27===a.keyCode&&this._finish()}}),e.Map.addInitHook("addHandler","boxZoom",e.Map.BoxZoom),e.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),e.Map.Keyboard=e.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanOffset(a.options.keyboardPanOffset),this._setZoomOffset(a.options.keyboardZoomOffset)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),e.DomEvent.on(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),e.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=b.body,d=b.documentElement,e=c.scrollTop||d.scrollTop,f=c.scrollLeft||d.scrollLeft;this._map._container.focus(),a.scrollTo(f,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(a){var b,c,d=this._panKeys={},e=this.keyCodes;for(b=0,c=e.left.length;c>b;b++)d[e.left[b]]=[-1*a,0];for(b=0,c=e.right.length;c>b;b++)d[e.right[b]]=[a,0];for(b=0,c=e.down.length;c>b;b++)d[e.down[b]]=[0,a];for(b=0,c=e.up.length;c>b;b++)d[e.up[b]]=[0,-1*a]},_setZoomOffset:function(a){var b,c,d=this._zoomKeys={},e=this.keyCodes;for(b=0,c=e.zoomIn.length;c>b;b++)d[e.zoomIn[b]]=a;for(b=0,c=e.zoomOut.length;c>b;b++)d[e.zoomOut[b]]=-a},_addHooks:function(){e.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){e.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var b,c=a.keyCode,d=this._map;if(c in this._panKeys){if(d._panAnim&&d._panAnim._inProgress)return;b=this._panKeys[c],a.shiftKey&&(b=e.point(b).multiplyBy(3)),d.panBy(b),d.options.maxBounds&&d.panInsideBounds(d.options.maxBounds)}else if(c in this._zoomKeys)d.setZoom(d.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else{if(27!==c)return;d.closePopup()}e.DomEvent.stop(a)}}}),e.Map.addInitHook("addHandler","keyboard",e.Map.Keyboard),e.Handler.MarkerDrag=e.Handler.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new e.Draggable(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),e.DomUtil.addClass(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&e.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(a){var b=this._marker,c=b._shadow,d=e.DomUtil.getPosition(b._icon),f=b._map.layerPointToLatLng(d);c&&e.DomUtil.setPosition(c,d),b._latlng=f,a.latlng=f,b.fire("move",a).fire("drag",a)},_onDragEnd:function(a){this._marker.fire("moveend").fire("dragend",a)}}),e.Control=e.Class.extend({options:{position:"topright"},initialize:function(a){e.setOptions(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var b=this._map;return b&&b.removeControl(this),this.options.position=a,b&&b.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var b=this._container=this.onAdd(a),c=this.getPosition(),d=a._controlCorners[c];return e.DomUtil.addClass(b,"leaflet-control"),-1!==c.indexOf("bottom")?d.insertBefore(b,d.firstChild):d.appendChild(b),this},remove:function(){return this._map?(e.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),e.control=function(a){return new e.Control(a)},e.Map.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){function a(a,f){var g=c+a+" "+c+f;b[a+f]=e.DomUtil.create("div",g,d)}var b=this._controlCorners={},c="leaflet-",d=this._controlContainer=e.DomUtil.create("div",c+"control-container",this._container);a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){e.DomUtil.remove(this._controlContainer)}}),e.Control.Zoom=e.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(a){var b="leaflet-control-zoom",c=e.DomUtil.create("div",b+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,b+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,b+"-out",c,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){this._disabled||this._map.zoomIn(a.shiftKey?3:1)},_zoomOut:function(a){this._disabled||this._map.zoomOut(a.shiftKey?3:1)},_createButton:function(a,b,c,d,f){var g=e.DomUtil.create("a",c,d);return g.innerHTML=a,g.href="#",g.title=b,e.DomEvent.on(g,"mousedown dblclick",e.DomEvent.stopPropagation).on(g,"click",e.DomEvent.stop).on(g,"click",f,this).on(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var a=this._map,b="leaflet-disabled";e.DomUtil.removeClass(this._zoomInButton,b),e.DomUtil.removeClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMinZoom())&&e.DomUtil.addClass(this._zoomOutButton,b),(this._disabled||a._zoom===a.getMaxZoom())&&e.DomUtil.addClass(this._zoomInButton,b)}}),e.Map.mergeOptions({zoomControl:!0}),e.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new e.Control.Zoom,this.addControl(this.zoomControl))}),e.control.zoom=function(a){return new e.Control.Zoom(a)},e.Control.Attribution=e.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(a){e.setOptions(this,a),this._attributions={}},onAdd:function(a){this._container=e.DomUtil.create("div","leaflet-control-attribution"),e.DomEvent&&e.DomEvent.disableClickPropagation(this._container);for(var b in a._layers)a._layers[b].getAttribution&&this.addAttribution(a._layers[b].getAttribution());return this._update(),this._container},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var b in this._attributions)this._attributions[b]&&a.push(b);var c=[];this.options.prefix&&c.push(this.options.prefix),a.length&&c.push(a.join(", ")),this._container.innerHTML=c.join(" | ")}}}),e.Map.mergeOptions({attributionControl:!0}),e.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new e.Control.Attribution).addTo(this))}),e.control.attribution=function(a){return new e.Control.Attribution(a)},e.Control.Scale=e.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var b="leaflet-control-scale",c=e.DomUtil.create("div",b),d=this.options;return this._addScales(d,b+"-line",c),a.on(d.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),c},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,b,c){a.metric&&(this._mScale=e.DomUtil.create("div",b,c)),a.imperial&&(this._iScale=e.DomUtil.create("div",b,c))},_update:function(){var a=this._map,b=a.getSize().y/2,c=a.distance(a.containerPointToLatLng([0,b]),a.containerPointToLatLng([this.options.maxWidth,b]));this._updateScales(c)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var b=this._getRoundNum(a),c=1e3>b?b+" m":b/1e3+" km";this._updateScale(this._mScale,c,b/a)},_updateImperial:function(a){var b,c,d,e=3.2808399*a;e>5280?(b=e/5280,c=this._getRoundNum(b),this._updateScale(this._iScale,c+" mi",c/b)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(a,b,c){a.style.width=Math.round(this.options.maxWidth*c)+"px",a.innerHTML=b},_getRoundNum:function(a){var b=Math.pow(10,(Math.floor(a)+"").length-1),c=a/b;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,b*c}}),e.control.scale=function(a){return new e.Control.Scale(a)},e.Control.Layers=e.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(a,b,c){e.setOptions(this,c),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var d in a)this._addLayer(a[d],d);for(d in b)this._addLayer(b[d],d,!0)},onAdd:function(a){return this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this)},addBaseLayer:function(a,b){return this._addLayer(a,b),this._update()},addOverlay:function(a,b){return this._addLayer(a,b,!0),this._update()},removeLayer:function(a){return a.off("add remove",this._onLayerChange,this),delete this._layers[e.stamp(a)],this._update()},_initLayout:function(){var a="leaflet-control-layers",b=this._container=e.DomUtil.create("div",a);b.setAttribute("aria-haspopup",!0),e.DomEvent.disableClickPropagation(b),e.Browser.touch||e.DomEvent.disableScrollPropagation(b);var c=this._form=e.DomUtil.create("form",a+"-list");if(this.options.collapsed){e.Browser.android||e.DomEvent.on(b,{mouseenter:this._expand,mouseleave:this._collapse},this);var d=this._layersLink=e.DomUtil.create("a",a+"-toggle",b);d.href="#",d.title="Layers",e.Browser.touch?e.DomEvent.on(d,"click",e.DomEvent.stop).on(d,"click",this._expand,this):e.DomEvent.on(d,"focus",this._expand,this),e.DomEvent.on(c,"click",function(){setTimeout(e.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=e.DomUtil.create("div",a+"-base",c),this._separator=e.DomUtil.create("div",a+"-separator",c),this._overlaysList=e.DomUtil.create("div",a+"-overlays",c),b.appendChild(c)},_addLayer:function(a,b,c){a.on("add remove",this._onLayerChange,this);var d=e.stamp(a);this._layers[d]={layer:a,name:b,overlay:c},this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;e.DomUtil.empty(this._baseLayersList),e.DomUtil.empty(this._overlaysList);var a,b,c,d,f=0;for(c in this._layers)d=this._layers[c],this._addItem(d),b=b||d.overlay,a=a||!d.overlay,f+=d.overlay?0:1;return this.options.hideSingleBase&&(a=a&&f>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=b&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var b=this._layers[e.stamp(a.target)],c=b.overlay?"add"===a.type?"overlayadd":"overlayremove":"add"===a.type?"baselayerchange":null;c&&this._map.fire(c,b)},_createRadioElement:function(a,c){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",e=b.createElement("div");return e.innerHTML=d,e.firstChild},_addItem:function(a){var c,d=b.createElement("label"),f=this._map.hasLayer(a.layer);a.overlay?(c=b.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=f):c=this._createRadioElement("leaflet-base-layers",f),c.layerId=e.stamp(a.layer),e.DomEvent.on(c,"click",this._onInputClick,this);var g=b.createElement("span");g.innerHTML=" "+a.name;var h=b.createElement("div");d.appendChild(h),h.appendChild(c),h.appendChild(g);var i=a.overlay?this._overlaysList:this._baseLayersList;return i.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){var a,b,c,d=this._form.getElementsByTagName("input"),e=[],f=[];this._handlingClick=!0;for(var g=d.length-1;g>=0;g--)a=d[g],b=this._layers[a.layerId].layer,c=this._map.hasLayer(b),a.checked&&!c?e.push(b):!a.checked&&c&&f.push(b);for(g=0;g<f.length;g++)this._map.removeLayer(f[g]);for(g=0;g<e.length;g++)this._map.addLayer(e[g]);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){e.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var a=this._map._size.y-(this._container.offsetTop+50);a<this._form.clientHeight?(e.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=a+"px"):e.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers()},_collapse:function(){e.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded")},_checkDisabledLayers:function(){for(var a,b,d=this._form.getElementsByTagName("input"),e=this._map.getZoom(),f=d.length-1;f>=0;f--)a=d[f],b=this._layers[a.layerId].layer,a.disabled=b.options.minZoom!==c&&e<b.options.minZoom||b.options.maxZoom!==c&&e>b.options.maxZoom}}),e.control.layers=function(a,b,c){return new e.Control.Layers(a,b,c)},e.PosAnimation=e.Evented.extend({run:function(a,b,c,d){this.stop(),this._el=a,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=e.DomUtil.getPosition(a),this._offset=b.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=e.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(a){var b=+new Date-this._startTime,c=1e3*this._duration;c>b?this._runFrame(this._easeOut(b/c),a):(this._runFrame(1),this._complete())},_runFrame:function(a,b){var c=this._startPos.add(this._offset.multiplyBy(a));b&&c._round(),e.DomUtil.setPosition(this._el,c),this.fire("step")},_complete:function(){e.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),e.Map.include({setView:function(a,b,d){if(b=b===c?this._zoom:this._limitZoom(b),a=this._limitCenter(e.latLng(a),b,this.options.maxBounds),d=d||{},this.stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==c&&(d.zoom=e.extend({animate:d.animate},d.zoom),d.pan=e.extend({animate:d.animate,duration:d.duration},d.pan));var f=this._zoom!==b?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,b,d.zoom):this._tryAnimatedPan(a,d.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(a,b),this},panBy:function(a,b){if(a=e.point(a).round(),b=b||{},!a.x&&!a.y)return this.fire("moveend");if(b.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new e.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),b.noMoveStart||this.fire("movestart"),b.animate!==!1){e.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(a);this._panAnim.run(this._mapPane,c,b.duration||.25,b.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){e.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,b){var c=this._getCenterOffset(a)._floor();return(b&&b.animate)===!0||this.getSize().contains(c)?(this.panBy(c,b),!0):!1}}),e.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});var i=e.DomUtil.TRANSITION&&e.Browser.any3d&&!e.Browser.mobileOpera;i&&e.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),e.DomEvent.on(this._proxy,e.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))}),e.Map.include(i?{_createAnimProxy:function(){var a=this._proxy=e.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(b){var c=e.DomUtil.TRANSFORM,d=a.style[c];e.DomUtil.setTransform(a,this.project(b.center,b.zoom),this.getZoomScale(b.zoom,1)),d===a.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var b=this.getCenter(),c=this.getZoom();e.DomUtil.setTransform(a,this.project(b,c),this.getZoomScale(c,1))},this)},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,b,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(b-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(b),f=this._getCenterOffset(a)._divideBy(1-1/d);return c.animate===!0||this.getSize().contains(f)?(e.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(a,b,!0)},this),!0):!1},_animateZoom:function(a,b,c,d){c&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=b,e.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:b,noUpdate:d}),setTimeout(e.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(e.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),e.Util.requestAnimFrame(function(){this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom)._moveEnd(!0)},this))}}:{}),e.Map.include({flyTo:function(a,b,d){function f(a){var b=(s*s-r*r+(a?-1:1)*v*v*t*t)/(2*(a?s:r)*v*t);return Math.log(Math.sqrt(b*b+1)-b)}function g(a){return(Math.exp(a)-Math.exp(-a))/2}function h(a){return(Math.exp(a)+Math.exp(-a))/2}function i(a){return g(a)/h(a)}function j(a){return r*(h(w)/h(w+u*a))}function k(a){return r*(h(w)*i(w+u*a)-g(w))/v}function l(a){return 1-Math.pow(1-a,1.5)}function m(){var c=(Date.now()-x)/z,d=l(c)*y;1>=c?(this._flyToFrame=e.Util.requestAnimFrame(m,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(k(d)/t)),q),this.getScaleZoom(r/j(d),q),{flyTo:!0})):this._move(a,b)._moveEnd(!0)}if(d=d||{},d.animate===!1||!e.Browser.any3d)return this.setView(a,b,d);this.stop();var n=this.project(this.getCenter()),o=this.project(a),p=this.getSize(),q=this._zoom;a=e.latLng(a),b=b===c?q:b;var r=Math.max(p.x,p.y),s=r*this.getZoomScale(q,b),t=o.distanceTo(n)||1,u=1.42,v=u*u,w=f(0),x=Date.now(),y=(f(1)-w)/u,z=d.duration?1e3*d.duration:1e3*y*.8;return this._moveStart(!0),m.call(this),this},flyToBounds:function(a,b){var c=this._getBoundsCenterZoom(a,b);return this.flyTo(c.center,c.zoom,b)}}),e.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(a){if(a=this._locateOptions=e.extend({},this._defaultLocateOptions,a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var b=e.bind(this._handleGeolocationResponse,this),c=e.bind(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(b,c,a):navigator.geolocation.getCurrentPosition(b,c,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){var b=a.code,c=a.message||(1===b?"permission denied":2===b?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:b,message:"Geolocation error: "+c+"."})},_handleGeolocationResponse:function(a){var b=a.coords.latitude,c=a.coords.longitude,d=new e.LatLng(b,c),f=d.toBounds(a.coords.accuracy),g=this._locateOptions;if(g.setView){var h=this.getBoundsZoom(f);this.setView(d,g.maxZoom?Math.min(h,g.maxZoom):h)}var i={latlng:d,bounds:f,timestamp:a.timestamp};for(var j in a.coords)"number"==typeof a.coords[j]&&(i[j]=a.coords[j]);this.fire("locationfound",i)}})}(window,document);